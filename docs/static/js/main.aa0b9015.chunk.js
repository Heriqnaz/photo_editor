(this.webpackJsonpphoto_editor=this.webpackJsonpphoto_editor||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},,,function(e,t,n){e.exports=n.p+"static/media/tail-spin.a75a5f09.svg"},function(e,t,n){e.exports=n(42)},,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n(1),l=n(4),i=n(15),u=n(5),s=n(2);function m(e){return{type:"SELECT_PHOTO",url:e}}function d(e){return{type:"SET_ACTIVE_TOOL",activeTool:e}}var h={selectedPhoto:"",isFetchingPhotos:!1,isError:!1,photos:[],isSearched:!1,imageHistory:[],currentIndex:-1},f={activeTool:null,activeSubTool:null};var g=Object(l.c)({photo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_PHOTOS":return Object(s.a)(Object(s.a)({},e),{},{isFetchingPhotos:!0,selectedPhoto:"",isSearched:!e.isSearched||e.isSearched});case"RECEIVE_PHOTOS":return Object(s.a)(Object(s.a)({},e),{},{isFetchingPhotos:!1,isError:!1,photos:t.photos});case"IS_ERROR":return Object(s.a)(Object(s.a)({},e),{},{isError:!0});case"SELECT_PHOTO":return Object(s.a)(Object(s.a)({},e),{},{selectedPhoto:t.url,imageHistory:[t.url],currentIndex:0});case"DRAW_IMAGE":return Object(s.a)(Object(s.a)({},e),{},{imageHistory:[].concat(Object(u.a)(e.imageHistory.slice(0,e.currentIndex+1)),[t.url]),currentIndex:e.currentIndex+1,selectedPhoto:t.url});case"REDO_IMAGE_CHANGE":return Object(s.a)(Object(s.a)({},e),{},{currentIndex:e.currentIndex+1,selectedPhoto:e.imageHistory[e.currentIndex+1]});case"UNDO_IMAGE_CHANGE":return Object(s.a)(Object(s.a)({},e),{},{currentIndex:e.currentIndex-1,selectedPhoto:e.imageHistory[e.currentIndex-1]});default:return e}},isOpenedSideBar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_SIDEBAR":return!0;case"CLOSE_SIDEBAR":return!1;default:return e}},tool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_TOOL":var n=e.activeTool===t.activeTool?null:t.activeTool;return Object(s.a)(Object(s.a)({},e),{},{activeTool:n});case"SET_ACTIVE_SUB_TOOL":var a=e.activeTool===t.activeSubTool?null:t.activeSubTool;return Object(s.a)(Object(s.a)({},e),{},{activeSubTool:a});default:return e}}});var p=Object(o.b)(null,(function(e){return{onSearch:function(t){e(function(e){return function(t){t(function(e){return{type:"REQUEST_PHOTOS",searchString:e}}(e));var n="https://pixabay.com/api/?key=17649790-b694a99a34bea3bd8ef0e0292&q=".concat(e,"&per_page=200");return fetch(n).then((function(e){return e.json()})).then((function(n){return t(function(e,t){return{type:"RECEIVE_PHOTOS",searchString:e,photos:t.hits.map((function(e){var t=e.previewWidth/e.previewHeight;return{src:e.largeImageURL,previewSrc:e.previewURL,height:150/t}}))}}(e,n))})).catch((function(){return t({type:"IS_ERROR"})}))}}(t))}}}))((function(e){var t,n=e.onSearch;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=t.value;a&&n(a)}},r.a.createElement("div",{className:"has-search search-panel"},r.a.createElement("div",{className:"mini-search-icon"}),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Search...",placeholder:"Search...",ref:function(e){return t=e}}),r.a.createElement("input",{type:"submit",style:{display:"none"}})))})),v=n(3),E=n(16),b=n.n(E),y=(n(28),Object(o.b)(null,(function(e){return{onPhotoClick:function(t){e(m(t)),e({type:"CLOSE_SIDEBAR"}),e(d(null))}}}))((function(e){var t=e.photo,n=e.onPhotoClick,c=Object(a.useState)(),o=Object(v.a)(c,2),l=o[0],i=o[1],u=Object(a.useState)(""),s=Object(v.a)(u,2),m=s[0],d=s[1],h=Object(a.useState)(!0),f=Object(v.a)(h,2),g=f[0],p=f[1];Object(a.useEffect)((function(){i(t.height);var e=new Image;e.src=t.src,e.onload=function(){d(t.previewSrc),p(!1)}}),[]);var E=function(){return r.a.createElement("img",{style:{width:"50px"},src:b.a,alt:"loading"})};return r.a.createElement("div",{className:"search-img-container",style:{height:l}},g?r.a.createElement(E,null):r.a.createElement("img",{onClick:function(){return n(t.src)},style:{width:"100%"},src:m,alt:""}))}))),S=(n(13),function(e){var t=e.data;return r.a.createElement("div",{className:"image-list-column"},t&&t.map((function(e,t){return r.a.createElement(y,{key:t,photo:e})})))}),O=(n(29),function(){return r.a.createElement("div",{className:"loading-indicator"},r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),C=Object(o.b)((function(e){return{photos:e.photo.photos,isFetching:e.photo.isFetchingPhotos,isSearched:e.photo.isSearched,isError:e.photo.isError}}),(function(e){return{onPhotoClick:function(t){e(m(t)),e({type:"CLOSE_SIDEBAR"})}}}))((function(e){var t=e.photos,n=e.isFetching,c=e.isSearched,o=e.newPhotosLoadCount,l=e.firstLoadCount,i=(e.onPhotoClick,e.isError),s=Object(a.useState)([]),m=Object(v.a)(s,2),d=m[0],h=m[1],f=Object(a.useState)(!1),g=Object(v.a)(f,2),p=g[0],E=g[1];Object(a.useEffect)((function(){h(t.slice(0,l))}),[t,l]);return n?r.a.createElement(O,null):c&&!d.length?r.a.createElement("div",{className:"mt-5 no_res"},r.a.createElement("svg",{className:"svg-icon",viewBox:"0 0 20 20"},r.a.createElement("path",{fill:"none",d:"M19.129,18.164l-4.518-4.52c1.152-1.373,1.852-3.143,1.852-5.077c0-4.361-3.535-7.896-7.896-7.896\r c-4.361,0-7.896,3.535-7.896,7.896s3.535,7.896,7.896,7.896c1.934,0,3.705-0.698,5.078-1.853l4.52,4.519\r c0.266,0.268,0.699,0.268,0.965,0C19.396,18.863,19.396,18.431,19.129,18.164z M8.567,15.028c-3.568,0-6.461-2.893-6.461-6.461\r s2.893-6.461,6.461-6.461c3.568,0,6.46,2.893,6.46,6.461S12.135,15.028,8.567,15.028z"})),r.a.createElement("h2",{className:"mt-2",style:{color:"grey"}},"No result")):c&&i?r.a.createElement("div",{className:"mt-5 no_res"},r.a.createElement("svg",{className:"svg-icon",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z"})),r.a.createElement("h2",{className:"mt-2",style:{color:"grey"}},"No result")):r.a.createElement("div",{onScroll:function(e){t.length!==d.length&&(t.length-d.length<o&&(E(!0),setTimeout((function(){E(!1),h((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t.slice(e.length,e.length+(t.length-d.length))))}))}),500)),e.target.scrollTop+1>=e.target.scrollHeight-e.target.offsetHeight&&(E(!0),setTimeout((function(){E(!1),h((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t.slice(e.length,e.length+o)))}))}),500)))},className:"images_container"},r.a.createElement("div",{className:"image-list-columns"},r.a.createElement(S,{data:d.slice(0,d.length/2)}),r.a.createElement(S,{data:d.slice(d.length/2)})),p&&r.a.createElement(O,null))})),w=(n(30),function(){return r.a.createElement("div",{className:"google-search-panel"},r.a.createElement("div",{className:"search_panel_container pt-3"},r.a.createElement(p,null),r.a.createElement(C,{newPhotosLoadCount:19,firstLoadCount:20})))}),j=(n(31),Object(o.b)((function(e){return{isOpenedSideBar:e.isOpenedSideBar,selectedPhoto:e.photo.selectedPhoto}}),(function(e){return{onPhotoSelect:function(t){e(m(t)),e(d(null))},closeSideBar:function(){return e({type:"CLOSE_SIDEBAR"})},openSideBar:function(){return e({type:"OPEN_SIDEBAR"})}}}))((function(e){var t=e.onPhotoSelect,n=e.isOpenedSideBar,a=(e.setActiveTool,e.openSideBar),c=e.closeSideBar,o=e.selectedPhoto;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"menu-left-part",style:{marginLeft:n?"0":"-30vw"}},r.a.createElement(w,{handleHide:c})),r.a.createElement("div",{className:"menu-right-part back-opened"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"imgInput",className:"sidebar-nav-item"},r.a.createElement("div",{className:"sidebar-icons upload"}),r.a.createElement("p",null,"Upload"),r.a.createElement("input",{type:"file",name:"imgInput",id:"imgInput",accept:"image/*",onChange:function(e){if(e.target.files[0]){var n=URL.createObjectURL(e.target.files[0]);t(n),c()}},hidden:!0}))),r.a.createElement("div",{className:"sidebar-nav-item ".concat(n&&"open"),onClick:function(){n?c():a()}},r.a.createElement("div",{className:"sidebar-icons search"}),r.a.createElement("p",null,"Search")),r.a.createElement("a",{href:o,download:!0,style:{pointerEvents:!o&&"none",cursor:!o&&"default"},className:"sidebar-nav-item"},r.a.createElement("div",{className:"sidebar-icons download"}),r.a.createElement("p",null,"Download")))),r.a.createElement("div",{onClick:c,className:"sidebar-back ".concat(n&&"visible")}))})));n(32);function T(e){var t=e.onClick,n=e.children,a=e.color,c=e.className,o=e.disabled;return r.a.createElement("button",{onClick:t,className:"button ".concat(o&&"disabled"," ").concat(c),disabled:o,style:{background:a}},n)}n(33);var N,x,_,L,k,I,R,B,A,P,F=function(e){var t,n,c,o,l,i,u,s,m=e.canvasCords,d=e.handleCrop,h=Object(a.useRef)(),f=Object(a.useRef)(),g=null,p=!1;Object(a.useEffect)((function(){return document.addEventListener("mousemove",C),document.addEventListener("mouseup",j),document.addEventListener("touchmove",E),document.addEventListener("touchend",b),f.current=requestAnimationFrame(w),function(){v()}}),[]);var v=function(){document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",j),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",b),cancelAnimationFrame(f.current)},E=function(e){C(e.touches[0])},b=function(e){0===e.touches.length&&j(e.changedTouches[0])},y=function(e){O(e);var a=t||n||o||c;g={x:i,y:u,cx:e.clientX,cy:e.clientY,w:l.width,h:l.height,isResizing:a,isMoving:!a&&S(!0),onTopEdge:o,onLeftEdge:c,onRightEdge:t,onBottomEdge:n}},S=function(e){return e},O=function(e){l=h.current.getBoundingClientRect(),i=e.clientX-l.left,u=e.clientY-l.top,o=u<4,c=i<4,t=i>=l.width-4,n=u>=l.height-4},C=function(e){O(e),s=e,p=!0},w=function e(){f.current=requestAnimationFrame(e);var a=h.current.getBoundingClientRect().left,r=(h.current.getBoundingClientRect().right,h.current.getBoundingClientRect().top),l=(h.current.getBoundingClientRect().bottom,h.current.getBoundingClientRect().height),d=h.current.getBoundingClientRect().width;if(p)if(p=!1,g&&g.isResizing){if(g.onRightEdge&&(s.clientX>m.right?h.current.style.width=m.right-a-1+"px":h.current.style.width=Math.max(i,60)+"px"),g.onBottomEdge&&(s.clientY>m.bottom?h.current.style.height=m.bottom-r-1+"px":h.current.style.height=Math.max(u,40)+"px"),g.onLeftEdge&&s.clientX>m.left){var v=Math.max(g.cx-s.clientX+g.w,60);v>60&&(h.current.style.width=v+"px",h.current.style.left=s.clientX+"px")}if(g.onTopEdge&&s.clientY>m.top){var E=Math.max(g.cy-3-s.clientY+g.h,40);E>40&&(h.current.style.height=E+"px",h.current.style.top=s.clientY+"px")}}else if(g&&g.isMoving){var b={left:s.clientX<m.left+g.x,top:s.clientY<m.top+g.y,right:s.clientX>m.right-(d-g.x),bottom:s.clientY>m.bottom-(l-g.y)};b.bottom&&b.left?(h.current.style.top=m.bottom-l+"px",h.current.style.left=m.left+"px"):b.bottom&&b.right?(h.current.style.left=m.right-d+"px",h.current.style.top=m.bottom-l+"px"):b.top&&b.right?(h.current.style.top=m.top+"px",h.current.style.left=m.right-d+"px"):b.top&&b.left?(h.current.style.top=m.top+"px",h.current.style.left=m.left+"px"):b.left?(h.current.style.top=s.clientY-g.y+"px",h.current.style.left=m.left+"px"):b.right?(h.current.style.top=s.clientY-g.y+"px",h.current.style.left=m.right-d+"px"):b.top?(h.current.style.left=s.clientX-g.x+"px",h.current.style.top=m.top+"px"):b.bottom?(h.current.style.left=s.clientX-g.x+"px",h.current.style.top=m.bottom-l+"px"):(h.current.style.top=s.clientY-g.y+"px",h.current.style.left=s.clientX-g.x+"px")}else t&&n||c&&o?h.current.style.cursor="nwse-resize":t&&o||n&&c?h.current.style.cursor="nesw-resize":t||c?h.current.style.cursor="ew-resize":n||o?h.current.style.cursor="ns-resize":S(!0)?h.current.style.cursor="move":h.current.style.cursor="default"},j=function(e){O(e),g=null};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:h,onMouseDown:function(e){y(e),e.preventDefault()},onTouchStart:function(e){y(e.touches[0]),e.preventDefault()},id:"crop"},r.a.createElement("div",{className:"angles left-middle"}),r.a.createElement("div",{className:"angles top-middle"}),r.a.createElement("div",{className:"angles right-middle"}),r.a.createElement("div",{className:"angles bottom-middle"}),r.a.createElement("div",{className:"angles left-top"}),r.a.createElement("div",{className:"angles right-top"}),r.a.createElement("div",{className:"angles right-bottom"}),r.a.createElement("div",{className:"angles left-bottom"})),r.a.createElement(T,{color:"black",onClick:function(){var e={left:h.current.getBoundingClientRect().left,right:h.current.getBoundingClientRect().right,top:h.current.getBoundingClientRect().top,bottom:h.current.getBoundingClientRect().bottom,height:h.current.getBoundingClientRect().height,width:h.current.getBoundingClientRect().width};v(),d(e)},className:"crop-button"},"Crop"))},D=(n(34),Object(o.b)((function(e){return{activeSubTool:e.tool.activeSubTool}}))((function(e){var t=e.handleBrightnessFilter,n=e.handleBlurFilter,c=e.handleGrayscaleFilter,o=e.handleColorChangeFilter,l=e.handleContrastFilter,i=e.handleSaturationFilter,u=e.handleApplyFilter,s=e.handleLineColor,m=e.activeSubTool,d=e.lineColor,h=e.handleCancelApplyFilter,f=Object(a.useState)(0),g=Object(v.a)(f,2),p=g[0],E=g[1],b=!1;return Object(a.useEffect)((function(){return function(){b||h()}}),[]),r.a.createElement("div",{className:"image-filter-tools"},m&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{md:"auto"},r.a.createElement(T,{className:"apply-button",color:"#2980b9",onClick:function(){b=!0,u()}},"Apply")),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"formControlRange"},"Color: ",p),r.a.createElement("input",{type:"range",min:"filter-brightness"===m?"-100":"0",max:"100",value:p,step:"1",onChange:function(e){b=!1;var a=e.target.value;switch(E(e.target.value),m){case"filter-brightness":t(a);break;case"filter-blur":n(a);break;case"filter-grayscale":c(a);break;case"filter-color":o(a);break;case"filter-saturation":i(a);break;case"filter-contrast":l(a)}}}))),"filter-color"===m&&r.a.createElement("div",{className:"image-filter-input"},r.a.createElement("input",{type:"color",className:"form-control",value:d,onChange:function(e){s(e.target.value)},id:"color"})))}))),H=(n(35),function(e){var t=e.lineStyle,n=e.lineWidth,a=e.lineColor,c=e.handleLineStyle,o=e.handleLineWidth,l=e.handleLineColor,i=function(e){c(e.target.value)};return r.a.createElement("div",{className:"draw-image-tools"},r.a.createElement("div",null,r.a.createElement("strong",null,"Line style"),r.a.createElement("div",{className:"line-style-ratios"},r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"lineStyle",id:"lineStyle1",value:"round",onChange:i,checked:"round"===t}),r.a.createElement("label",{htmlFor:"lineStyle1"},"Round")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"lineStyle",id:"lineStyle2",value:"square",onChange:i,checked:"square"===t}),r.a.createElement("label",{htmlFor:"lineStyle2"},"Square")))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"formControlRange"},"Line Thickness: ",n),r.a.createElement("input",{type:"range",value:n,onChange:function(e){o(e.target.value)},max:20,step:.1,min:.1,id:"formControlRange"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"color"},r.a.createElement("strong",null,"Color")),r.a.createElement("input",{type:"color",value:a,onChange:function(e){l(e.target.value)},id:"color"})))}),M=(n(36),"".concat(window.location.origin,"/frames/")),U="".concat(M,"/Birthday"),X="".concat(M,"/Love"),Y="".concat(M,"/PartyTime"),G=Object(o.b)((function(e){return{activeSubTool:e.tool.activeSubTool}}))((function(e){var t=e.activeSubTool,n=e.handleSelectedFrame,c=e.handleApplyFrame,o=e.handleCancelApplyFrame,l=Object(a.useState)(""),i=Object(v.a)(l,2),u=i[0],s=i[1],m=["".concat(U,"/Birthday_1.png"),"".concat(U,"/Birthday_2.png"),"".concat(U,"/Birthday_3.png"),"".concat(U,"/Birthday_4.png"),"".concat(U,"/Birthday_5.png"),"".concat(U,"/Birthday_6.png"),"".concat(U,"/Birthday_7.png"),"".concat(U,"/Birthday_8.png")],d=["".concat(X,"/Love_1.png"),"".concat(X,"/Love_2.png"),"".concat(X,"/Love_3.png"),"".concat(X,"/Love_4.png"),"".concat(X,"/Love_5.png"),"".concat(X,"/Love_6.png"),"".concat(X,"/Love_7.png"),"".concat(X,"/Love_8.png")],h=["".concat(Y,"/PartyTime_1.png"),"".concat(Y,"/PartyTime_2.png"),"".concat(Y,"/PartyTime_3.png"),"".concat(Y,"/PartyTime_4.png")],f=!1;Object(a.useEffect)((function(){return function(){f||o()}}));var g=function(e){return function(){switch(f=!1,t){case"birthday":s("birthday"+e),n(m[e]);break;case"love":s("love"+e),n(d[e]);break;case"party-time":s("partyTime"+e),n(h[e])}}};return r.a.createElement("div",{className:"image-frame"},t&&("birthday"===t||"love"===t||"party-time"===t)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(T,{className:"apply-button",color:"#2980b9",onClick:function(){f=!0,c()}},"Apply")),"birthday"===t&&m.map((function(e,t){return r.a.createElement("div",{onClick:g(t),key:"birthday"+t},r.a.createElement("img",{src:e,alt:"Not found",className:"frame-img ".concat(u==="birthday"+t&&"active")}))})),"love"===t&&d.map((function(e,t){return r.a.createElement("div",{onClick:g(t),key:"love"+t},r.a.createElement("img",{src:e,alt:"Not found",className:"frame-img ".concat(u==="love"+t&&"active")}))})),"party-time"===t&&h.map((function(e,t){return r.a.createElement("div",{onClick:g(t),key:"partyTime"+t},r.a.createElement("img",{src:e,alt:"Not found",className:"frame-img ".concat(u==="partyTime"+t&&"active")}))}))))})),z="".concat(window.location.origin,"/stickers"),W="".concat(z,"/Smile"),q="".concat(z,"/Butterfly"),V=Object(o.b)((function(e){return{activeSubTool:e.tool.activeSubTool}}))((function(e){var t=e.activeSubTool,n=e.handleSelectedSticker,a=e.handleApplySticker,c=["".concat(W,"/Smile_1.png"),"".concat(W,"/Smile_2.png"),"".concat(W,"/Smile_3.png")],o=["".concat(q,"/Butterfly_1.png"),"".concat(q,"/Butterfly_2.png")],l=function(e){return function(){switch(t){case"smile":n(c[e]);break;case"butterfly":n(o[e])}}};return r.a.createElement("div",{className:"image-frame"},t&&("smile"===t||"butterfly"===t)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{md:"auto"},r.a.createElement(T,{className:"apply-button",color:"#2980b9n",onClick:function(){a()}},"Apply")),"smile"===t&&c.map((function(e,t){return r.a.createElement("div",{onClick:l(t),key:"sticker"+t},r.a.createElement("img",{src:e,alt:"Not found",className:"frame-img"}))})),"butterfly"===t&&o.map((function(e,t){return r.a.createElement("div",{onClick:l(t),key:"sticker"+t},r.a.createElement("img",{src:e,alt:"Not found",className:"frame-img"}))}))))})),J=(n(37),!1),Q=50,K=50,Z=2*Math.PI,$={x:0,y:0},ee=!1,te=Object(o.b)((function(e){return{activeTool:e.tool.activeTool,selectedPhoto:e.photo.selectedPhoto}}),(function(e){return{setActiveTool:function(t){return e(d(t))},onImageChangeApply:function(t){e({type:"DRAW_IMAGE",url:t})}}}))((function(e){var t=e.selectedPhoto,n=e.activeTool,c=e.setActiveTool,o=e.activeSubTool,l=e.onImageChangeApply,i=Object(a.useRef)(),u=Object(a.useRef)(),s=Object(a.useState)(null),m=Object(v.a)(s,2),d=m[0],h=m[1],f=Object(a.useState)(null),g=Object(v.a)(f,2),p=g[0],E=g[1],b=Object(a.useState)("1"),y=Object(v.a)(b,2),S=y[0],O=y[1],C=Object(a.useState)("#000000"),w=Object(v.a)(C,2),j=w[0],T=w[1],M=Object(a.useState)("round"),U=Object(v.a)(M,2),X=U[0],Y=U[1];Object(a.useEffect)((function(){t&&l(t)}),[]),Object(a.useEffect)((function(){q(t)}),[t]);var z=function(){de();var e=i.current.toDataURL("image/jpeg");l(e)};Object(a.useEffect)((function(){return console.log(n),"draw"===n&&(i.current.addEventListener("mousedown",me),i.current.addEventListener("mouseup",z),i.current.addEventListener("mouseout",de),i.current.addEventListener("mousemove",he)),"stickers"===n&&(u.current.addEventListener("mousedown",ce),u.current.addEventListener("mouseup",oe),u.current.addEventListener("mouseout",le),u.current.addEventListener("mousemove",ie)),function(){i.current.removeEventListener("mousedown",me),i.current.removeEventListener("mouseup",z),i.current.removeEventListener("mouseout",de),i.current.removeEventListener("mousemove",he),u.current&&(u.current.removeEventListener("mousedown",ce),u.current.removeEventListener("mouseup",oe),u.current.removeEventListener("mouseout",le),u.current.removeEventListener("mousemove",ie))}}),[n]);var W=function(e){return e.getBoundingClientRect()};function q(e,t){var n=i.current.getContext("2d"),a=new Image;if(a.src=e,a.crossOrigin="anonymous",a.onload=function(){var e=a.width/a.height;i.current.height=500,i.current.width=500*e,n.drawImage(a,0,0,i.current.width,i.current.height),h(W(i.current))},t){var r=new Image;r.src=t,r.crossOrigin="anonymous",r.onload=function(){n.drawImage(r,0,0,i.current.width,i.current.height)}}E(a)}var te=function(e){T(e)},ne=function(){var e=i.current.toDataURL("image/jpeg"),t=i.current.getContext("2d"),n=i.current.width,a=i.current.height,r=new Image;return t.drawImage(p,0,0,n,a),r.src=e,t.drawImage(p,0,0,n,a),t.save(),{ctx:t,image:r,width:n,height:a}},ae=function(e,t){var n=u.current.getContext("2d");n.clearRect(0,0,u.current.width,u.current.height),n.drawImage(P,0,0,P.width,P.height,Q,K,L,R),e&&(re(Q,K,n),re(k,K,n),re(k,I,n),re(Q,I,n)),t&&(n.beginPath(),n.moveTo(Q,K),n.lineTo(k,K),n.lineTo(k,I),n.lineTo(Q,I),n.closePath(),n.stroke())};function re(e,t,n){n.beginPath(),n.arc(e,t,8,0,Z),n.closePath(),n.fill()}function ce(e){if(P){var t=d.left,n=d.top;B=parseInt(e.clientX-t),A=parseInt(e.clientY-n),$=function(e,t){var n,a;if((n=e-Q)*n+(a=t-K)*a<=64)return 0;if((n=e-k)*n+(a=t-K)*a<=64)return 1;if((n=e-k)*n+(a=t-I)*a<=64)return 2;if((n=e-Q)*n+(a=t-I)*a<=64)return 3;return-1}(B,A),ee=$<0&&(r=A,(a=B)>Q&&a<Q+L&&r>K&&r<K+R)}var a,r}function oe(e){P&&($=-1,ee=!1,ae(!0,!1))}function le(e){P&&oe()}function ie(e){if(P){var t=d.left,n=d.top;if($>-1){var a=parseInt(e.clientX-t),r=parseInt(e.clientY-n);switch($){case 0:Q=a,L=k-a,K=r,R=I-r;break;case 1:K=r,L=a-Q,R=I-r;break;case 2:L=a-Q,R=r-K;break;case 3:Q=a,L=k-a,R=r-K}L<25&&(L=25),R<25&&(R=25),k=Q+L,I=K+R,ae(!0,!0)}else if(ee){var c=parseInt(e.clientX-t),o=parseInt(e.clientY-n),l=c-B,i=o-A;Q+=l,K+=i,k+=l,I+=i,B=c,A=o,ae(!1,!0)}}}var ue=function(){var e=i.current.toDataURL("image/jpeg");q(e),l(e),c(null)},se=function(){ne().ctx.restore()};function me(e){var t=i.current.getContext("2d");J=!0,t.beginPath(),t.moveTo(e.pageX-d.left,e.pageY-d.top),t.strokeStyle=_,t.lineWidth=x,t.lineCap=N,t.lineJoin="round"===N?"miter":"bever"}function de(){J=!1}function he(e){if(J){var t=i.current.getContext("2d");t.lineTo(e.pageX-d.left,e.pageY-d.top),t.stroke()}}return Object(a.useEffect)((function(){N=X}),[X]),Object(a.useEffect)((function(){x=S}),[S]),Object(a.useEffect)((function(){_=j}),[j]),r.a.createElement("div",null,r.a.createElement("div",{className:"img-box"},"crop"===n&&r.a.createElement(F,{handleCrop:function(e){var t=e.left,n=e.top,a=e.width,r=e.height,o=i.current.toDataURL("image/jpeg"),u=i.current.getContext("2d"),s=new Image;s.src=o,s.onload=function(){var e=a/r,o={left:t-d.left,top:n-d.top,width:a,height:r};i.current.width=500*e,i.current.height=500,u.clearRect(0,0,i.current.width,i.current.height),u.drawImage(s,o.left,o.top,o.width,o.height,0,0,i.current.width,i.current.height),h(W(i.current)),c(null);var m=new Image,f=i.current.toDataURL("image/jpeg");m.src=f,E(m),l(f)}},canvasCords:d}),r.a.createElement("div",{className:"cnvs edit-img ".concat("draw"===n?"edit-img-draw":"")},r.a.createElement("canvas",{ref:i,id:"canvas"}),"stickers"===n&&r.a.createElement("canvas",{ref:u,id:"canvasSticker",className:"cnvs"}))),"filter"===n&&r.a.createElement(D,{activeSubTool:o,lineColor:j,setActiveTool:c,handleBrightnessFilter:function(e){var t=ne(),n=t.ctx,a=t.image,r=t.width,c=t.height;e<0?(n.globalCompositeOperation="multiply",n.fillStyle="black",n.globalAlpha=-e/100,n.fillRect(0,0,r,c)):e>0&&(n.fillStyle="white",n.globalCompositeOperation="lighten",n.globalAlpha=1,n.drawImage(a,0,0),n.globalAlpha=e/100,n.fillRect(0,0,r,c)),n.restore()},handleBlurFilter:function(e){var t=ne(),n=t.ctx,a=t.width,r=t.image,c=t.height;n.filter="blur(".concat(e/4,"px)"),n.drawImage(r,a,c)},handleGrayscaleFilter:function(e){var t=ne(),n=t.ctx,a=t.width,r=t.height;e<=100&&(n.globalCompositeOperation="color",n.fillStyle="black",n.globalAlpha=e/100,n.fillRect(0,0,a,r)),n.restore()},handleColorChangeFilter:function(e){var t=ne(),n=t.ctx,a=t.width,r=t.height;n.globalCompositeOperation="#000000"===j?"multiply":"lighten",n.fillStyle=j,n.globalAlpha=e/100,n.fillRect(0,0,a,r),n.restore()},handleContrastFilter:function(e){var t=ne(),n=t.ctx,a=t.width,r=t.image,c=t.height;n.filter="contrast(".concat(e/4,")"),n.drawImage(r,a,c)},handleSaturationFilter:function(e){var t=ne(),n=t.ctx,a=t.width,r=t.height;n.globalCompositeOperation="saturation",n.fillStyle="red",n.globalAlpha=e/100,n.fillRect(0,0,a,r),n.restore()},handleApplyFilter:ue,handleLineColor:te,handleCancelApplyFilter:se}),"draw"===n&&r.a.createElement(H,{handleLineStyle:function(e){Y(e)},handleLineWidth:function(e){O(e)},handleLineColor:te,lineWidth:S,lineColor:j,lineStyle:X}),"frame"===n&&r.a.createElement(G,{handleSelectedFrame:function(e){var t=ne().ctx;q(i.current.toDataURL("image/jpeg"),e),t.restore()},handleApplyFrame:ue,handleCancelApplyFrame:se}),"stickers"===n&&r.a.createElement(V,{handleSelectedSticker:function(e){var t=new Image;t.src=e,t.crossOrigin="anonymous",t.onload=function(){L=t.width,R=t.height,k=Q+L,I=K+R,P=t,u.current.height=i.current.height,u.current.width=i.current.width,ae(!0,!1,e)},t.src=e},handleApplySticker:function(){var e=i.current.getContext("2d");ae(!1,!1),e.drawImage(u.current,0,0);var t=i.current.toDataURL("image/jpeg");q(t),l(t),c(null)}}))})),ne=(n(38),Object(o.b)((function(e){return{selectedPhoto:e.photo.selectedPhoto,activeTool:e.tool.activeTool,activeSubTool:e.tool.activeSubTool,canUndoChange:e.photo.currentIndex>0,canRedoChange:e.photo.currentIndex<e.photo.imageHistory.length-1}}),(function(e){return{setActiveTool:function(t){return e(d(t))},setActiveSubTool:function(t){return e({type:"SET_ACTIVE_SUB_TOOL",activeSubTool:t})},undoImageChange:function(){return e({type:"UNDO_IMAGE_CHANGE"})},redoImageChange:function(){return e({type:"REDO_IMAGE_CHANGE"})}}}))((function(e){var t=e.activeTool,n=e.activeSubTool,c=e.selectedPhoto,o=e.setActiveTool,l=e.setActiveSubTool,i=e.undoImageChange,u=e.redoImageChange,s=e.canUndoChange,m=e.canRedoChange;Object(a.useEffect)((function(){"draw"!==t&&o(null)}),[c]);var d={filter:[{name:"filter-blur",title:"Blur"},{name:"filter-brightness",title:"Brightness"},{name:"filter-grayscale",title:"Grayscale"},{name:"filter-color",title:"Color"},{name:"filter-saturation",title:"Saturation"},{name:"filter-contrast",title:"Contrast"}],frame:[{name:"birthday",title:"Birthday"},{name:"love",title:"Love"},{name:"party-time",title:"Party Time"}],stickers:[{name:"smile",title:"Smile"},{name:"butterfly",title:"Butterfly"}]};return r.a.createElement("div",{className:"tool-bar"},r.a.createElement("div",null,r.a.createElement("ul",{className:"tools"},[{name:"filter",title:"Filter"},{name:"frame",title:"Frame"},{name:"stickers",title:"Stickers"},{name:"crop",title:"Crop"},{name:"draw",title:"Draw"}].map((function(e,n){return r.a.createElement("li",{onClick:function(){return t=e.name,void(c&&o(t));var t},key:n,className:t===e.name?"tool-active":""},e.title)})))),r.a.createElement("div",{className:"undo_redo_cont"},r.a.createElement("div",{className:"undo_redo_btn_cont"},r.a.createElement("button",{className:"undo_btn",disabled:!s,onClick:i})),r.a.createElement("div",{className:"undo_redo_btn_cont"},r.a.createElement("button",{className:"redo_btn",disabled:!m,onClick:u}))),d[t]&&r.a.createElement("ul",{className:"sub-tools"},d[t].map((function(e,t){return r.a.createElement("li",{onClick:function(){return l(e.name)},className:n===e.name?"tool-active":"",key:t},e.title)}))))}))),ae=(n(39),function(){return r.a.createElement("div",{className:"content"},r.a.createElement(ne,null),r.a.createElement(te,null))}),re=(n(40),function(){return r.a.createElement("div",{className:"wrapper-box"},r.a.createElement("div",{className:"wrapper"},r.a.createElement(j,null),r.a.createElement(ae,null)))});var ce,oe=function(){return r.a.createElement(re,null)},le=(n(41),Object(l.d)(g,ce,Object(l.a)(i.a)));Object(c.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:le},r.a.createElement(oe,null))),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.aa0b9015.chunk.js.map