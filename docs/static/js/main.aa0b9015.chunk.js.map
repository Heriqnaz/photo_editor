{"version":3,"sources":["assets/svgs/tail-spin.svg","redux/actions/photosActions.js","redux/actions/toolsActions.js","redux/reducers.js","redux/actions/imageHistoryActions.js","redux/actions/sideBarActions.js","components/SearchPanel/SearchPanel.jsx","components/SearchedImage/SearchedImage.jsx","components/ImagesList/Column.jsx","components/LoadingIndicator/LoadingIndicator.jsx","components/ImagesList/ImagesList.jsx","containers/GoogleSearchPanel/GoogleSearchPanel.jsx","components/SideBar/SideBar.jsx","components/Button/Button.jsx","components/ImageContainer/ImageContainer.jsx","components/Cropper/Cropper.jsx","components/ImageFilterTool/ImageFilterTool.jsx","components/ImageDrawTool/ImageDrawTool.jsx","components/ImageFrameTool/ImageFrameTool.jsx","components/ImageStickerTool/ImageStickerTool.jsx","components/ToolBar/ToolBar.jsx","components/Editor/Editor.jsx","containers/Home.jsx","App.jsx","redux/configureStore.js","index.jsx"],"names":["module","exports","selectPhoto","url","type","setActiveTool","activeTool","initialPhotoState","selectedPhoto","isFetchingPhotos","isError","photos","isSearched","imageHistory","currentIndex","initialToolState","activeSubTool","combineReducers","photo","state","action","slice","isOpenedSideBar","tool","connect","dispatch","onSearch","searchString","requestPhotos","fetch","then","res","json","result","response","hits","map","hit","ratio","previewWidth","previewHeight","src","largeImageURL","previewSrc","previewURL","height","receivePhotos","catch","fetchPhotos","input","onSubmit","e","preventDefault","searchText","value","className","aria-label","placeholder","ref","node","style","display","onPhotoClick","useState","setHeight","setSrc","isLoading","setLoading","useEffect","img","Image","onload","Loader","width","loader","alt","onClick","Column","data","i","key","LoadingIndicator","isFetching","newPhotosLoadCount","firstLoadCount","photosToShow","setPhotosToShow","isPhotosLoading","setIsPhotosLoading","length","viewBox","fill","d","color","onScroll","setTimeout","prevPhotos","target","scrollTop","scrollHeight","offsetHeight","GoogleSearchPanel","onPhotoSelect","closeSideBar","openSideBar","marginLeft","handleHide","htmlFor","name","id","accept","onChange","files","URL","createObjectURL","hidden","href","download","pointerEvents","cursor","Button","children","disabled","background","lineStyleLocal","lineWidthLocal","lineColorLocal","imageWidth","imageRight","imageBottom","imageHeight","startX","startY","imageSticker","Cropper","onRightEdge","onBottomEdge","onLeftEdge","onTopEdge","b","x","y","canvasCords","handleCrop","crop","useRef","requestRef","clicked","redraw","document","addEventListener","onMove","onUp","onTouchMove","onTouchEnd","current","requestAnimationFrame","animate","removeAllEvents","removeEventListener","cancelAnimationFrame","touches","changedTouches","onDown","calc","isResizing","cx","clientX","cy","clientY","w","h","isMoving","canMove","bool","getBoundingClientRect","left","top","ee","cropCords","right","bottom","Math","max","currentWidth","currentHeight","limit","onMouseDown","onTouchStart","handleBrightnessFilter","handleBlurFilter","handleGrayscaleFilter","handleColorChangeFilter","handleContrastFilter","handleSaturationFilter","handleApplyFilter","handleLineColor","lineColor","handleCancelApplyFilter","rangeValue","setRangeValue","isApply","md","min","step","event","ImageDrawTool","lineStyle","lineWidth","handleLineStyle","handleLineWidth","onLineStyle","checked","framesBaseUrl","window","location","origin","birthdayFramesUrl","loveFramesUrl","partyTimeFramesUrl","handleSelectedFrame","handleApplyFrame","handleCancelApplyFrame","activeFrame","setActiveFrame","birthdayFrame","loveFrame","partyTimeFrame","handleSelectFrame","index","frame","stickerBaseUrl","smileStickerUrl","butterfly","handleSelectedSticker","handleApplySticker","smileSticker","butterflySticker","handleSelectSticker","isDrawing","stickerImageX","stickerImageY","pi2","PI","draggingResizer","draggingImage","onImageChangeApply","canvas","canvasSticker","setCanvasCords","setImg","setLineWidth","setLineColor","setLineStyle","draw","onMouseUpDraw","stopDrawingLine","toDataURL","console","log","startDrawingLine","drawLine","handleMouseDown","handleMouseUp","handleMouseOut","handleMouseMove","provideCord","element","frameUrl","ctx","getContext","crossOrigin","drawImage","frameImg","prepareCanvasImage","image","save","drawSticker","withAnchors","withBorders","clearRect","drawDragAnchor","beginPath","moveTo","lineTo","closePath","stroke","arc","offsetX","offsetY","parseInt","dx","dy","resizerRadius","anchorHitTest","mouseX","mouseY","handleApply","handleCancelApply","restore","pageX","pageY","strokeStyle","lineCap","lineJoin","cropDimensions","newimg","globalCompositeOperation","fillStyle","globalAlpha","fillRect","filter","canUndoChange","canRedoChange","setActiveSubTool","undoImageChange","redoImageChange","subTools","title","stickers","subTool","Editor","Home","App","preloadedState","store","createStore","reducer","applyMiddleware","thunk","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.aa0b9015.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/tail-spin.a75a5f09.svg\";","export const REQUEST_PHOTOS = 'REQUEST_PHOTOS';\r\nexport const RECEIVE_PHOTOS = 'RECEIVE_PHOTOS';\r\nexport const SELECT_PHOTO = 'SELECT_PHOTO';\r\nexport const IS_ERROR = 'IS_ERROR';\r\n\r\nexport function selectPhoto(url) {\r\n    return {\r\n        type: SELECT_PHOTO,\r\n        url\r\n    }\r\n}\r\n\r\nexport function requestPhotos(searchString) {\r\n    return {\r\n        type: REQUEST_PHOTOS,\r\n        searchString\r\n    }\r\n}\r\n\r\nexport function receivePhotos(searchString, response) {\r\n    return {\r\n        type: RECEIVE_PHOTOS,\r\n        searchString,\r\n        photos: response.hits.map(hit => {\r\n\r\n            const ratio = hit.previewWidth / hit.previewHeight;\r\n\r\n            return {\r\n                src: hit.largeImageURL,\r\n                previewSrc: hit.previewURL,\r\n                height: 150 / ratio\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function isError() {\r\n    return {\r\n        type: IS_ERROR\r\n    }\r\n}\r\n\r\nexport function fetchPhotos(searchString) {\r\n    return dispatch => {\r\n        dispatch(requestPhotos(searchString));\r\n        // api has limits , and we couldnt load pages, so we imitate pages in scroll\r\n        const url = `https://pixabay.com/api/?key=17649790-b694a99a34bea3bd8ef0e0292&q=${searchString}&per_page=200`;\r\n        return fetch(url)\r\n            .then(res => res.json())\r\n            .then(result => dispatch(receivePhotos(searchString, result)))\r\n            .catch(() => dispatch(isError()))\r\n    }\r\n}","export const SET_ACTIVE_TOOL = 'SET_ACTIVE_TOOL';\r\nexport const SET_ACTIVE_SUB_TOOL = 'SET_ACTIVE_SUB_TOOL';\r\n\r\nexport function setActiveTool(activeTool) {\r\n    return {\r\n        type: SET_ACTIVE_TOOL,\r\n        activeTool\r\n    }\r\n}\r\n\r\nexport function setActiveSubTool(activeSubTool) {\r\n    return {\r\n        type: SET_ACTIVE_SUB_TOOL,\r\n        activeSubTool\r\n    }\r\n}","import { combineReducers } from 'redux';\r\n\r\nimport {\r\n    APPLY_IMAGE_CHANGE,\r\n    CLOSE_SIDEBAR,\r\n    OPEN_SIDEBAR,\r\n    RECEIVE_PHOTOS, REDO_IMAGE_CHANGE,\r\n    REQUEST_PHOTOS,\r\n    SELECT_PHOTO,\r\n    SET_ACTIVE_SUB_TOOL,\r\n    SET_ACTIVE_TOOL, UNDO_IMAGE_CHANGE\r\n} from './actions';\r\n\r\nimport {IS_ERROR} from './actions/photosActions';\r\n\r\nconst initialPhotoState = {\r\n    selectedPhoto: '',\r\n    isFetchingPhotos: false,\r\n    isError: false,\r\n    photos: [],\r\n    isSearched: false,\r\n    imageHistory: [],\r\n    currentIndex: -1\r\n};\r\n\r\nconst initialToolState = {\r\n    activeTool: null,\r\n    activeSubTool: null\r\n};\r\n\r\nfunction tool(state = initialToolState, action) {\r\n    switch (action.type) {\r\n    case SET_ACTIVE_TOOL:\r\n        const activeTool = state.activeTool === action.activeTool ? null : action.activeTool;\r\n        return {\r\n            ...state,\r\n            activeTool\r\n        };\r\n    case SET_ACTIVE_SUB_TOOL:\r\n        const activeSubTool = state.activeTool === action.activeSubTool ? null : action.activeSubTool;\r\n        return {\r\n            ...state,\r\n            activeSubTool\r\n        };\r\n    default:\r\n        return state\r\n    }\r\n}\r\n\r\nfunction photo(state = initialPhotoState, action) {\r\n    switch (action.type) {\r\n    case REQUEST_PHOTOS:\r\n        return {\r\n            ...state,\r\n            isFetchingPhotos: true,\r\n            selectedPhoto: '',\r\n            isSearched: state.isSearched ? state.isSearched : true\r\n        };\r\n    case RECEIVE_PHOTOS:\r\n        return {\r\n            ...state,\r\n            isFetchingPhotos: false,\r\n            isError: false,\r\n            photos: action.photos\r\n        };\r\n    case IS_ERROR:\r\n        return {\r\n            ...state,\r\n            isError: true,\r\n        }\r\n    case SELECT_PHOTO:\r\n        return {\r\n            ...state,\r\n            selectedPhoto: action.url,\r\n            imageHistory: [ action.url ],\r\n            currentIndex: 0\r\n        };\r\n    case APPLY_IMAGE_CHANGE:\r\n        return {\r\n            ...state,\r\n            imageHistory: [ ...state.imageHistory.slice(0, state.currentIndex + 1), action.url ],\r\n            currentIndex: state.currentIndex + 1,\r\n            selectedPhoto: action.url\r\n        };\r\n    case REDO_IMAGE_CHANGE:\r\n        return {\r\n            ...state,\r\n            currentIndex: state.currentIndex + 1,\r\n            selectedPhoto: state.imageHistory[state.currentIndex + 1]\r\n        };\r\n    case UNDO_IMAGE_CHANGE:\r\n        return {\r\n            ...state,\r\n            currentIndex: state.currentIndex - 1,\r\n            selectedPhoto: state.imageHistory[state.currentIndex - 1]\r\n        };\r\n    default:\r\n        return state\r\n    }\r\n}\r\n\r\nfunction isOpenedSideBar(state = false, action) {\r\n    switch (action.type) {\r\n    case OPEN_SIDEBAR:\r\n        return true;\r\n    case CLOSE_SIDEBAR:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    photo,\r\n    isOpenedSideBar,\r\n    tool\r\n});\r\n\r\n\r\n","export const APPLY_IMAGE_CHANGE = 'DRAW_IMAGE';\r\nexport const UNDO_IMAGE_CHANGE = 'UNDO_IMAGE_CHANGE';\r\nexport const REDO_IMAGE_CHANGE = 'REDO_IMAGE_CHANGE';\r\n\r\nexport function applyImageChange(imgUrl) {\r\n    return {\r\n        type: APPLY_IMAGE_CHANGE,\r\n        url: imgUrl\r\n    }\r\n}\r\n\r\nexport function undoImageChange() {\r\n    return {\r\n        type: UNDO_IMAGE_CHANGE\r\n    }\r\n}\r\n\r\nexport function redoImageChange() {\r\n    return {\r\n        type: REDO_IMAGE_CHANGE\r\n    }\r\n}","export const OPEN_SIDEBAR = 'OPEN_SIDEBAR';\r\nexport const CLOSE_SIDEBAR = 'CLOSE_SIDEBAR';\r\n\r\nexport function openSideBar() {\r\n    return {\r\n        type: OPEN_SIDEBAR\r\n    }\r\n}\r\n\r\nexport function closeSideBar() {\r\n    return {\r\n        type: CLOSE_SIDEBAR\r\n    }\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { fetchPhotos } from '../../redux/actions';\r\n\r\nconst SearchPanel = ({ onSearch }) => {\r\n    let input;\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const searchText = input.value;\r\n        if (searchText) onSearch(searchText);\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"has-search search-panel\">\r\n                <div className='mini-search-icon'/>\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    aria-label='Search...'\r\n                    placeholder=\"Search...\"\r\n                    ref={node => (input = node)}\r\n                />\r\n                <input type=\"submit\" style={{ display: 'none' }}/>\r\n            </div>\r\n        </form>\r\n    )\r\n};\r\n\r\nSearchPanel.propTypes = {\r\n    onSearch: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    onSearch: (searchString) => {\r\n        dispatch(fetchPhotos(searchString));\r\n    }\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(SearchPanel);","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeSideBar, selectPhoto, setActiveTool } from '../../redux/actions';\r\n\r\nimport loader from '../../assets/svgs/tail-spin.svg';\r\n\r\nimport './SearchedImage.css';\r\n\r\nconst SearchedImage = ({ photo, onPhotoClick }) => {\r\n\r\n    const [height, setHeight] = useState();\r\n    const [src, setSrc] = useState('');\r\n    const [isLoading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setHeight(photo.height);\r\n        const img = new Image();\r\n        img.src = photo.src;\r\n        img.onload = () => {\r\n            setSrc(photo.previewSrc);\r\n            setLoading(false)\r\n        }\r\n\r\n    }, []);\r\n\r\n    const Loader = () => {\r\n        return (\r\n            <img style={{ width: '50px' }} src={loader} alt=\"loading\"/>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className='search-img-container' style={{ height }}>\r\n            {isLoading ? <Loader/> :\r\n                <img onClick={() => onPhotoClick(photo.src)} style={{ width: '100%' }} src={src} alt=\"\"/>}\r\n        </div>\r\n    )\r\n};\r\n\r\nSearchedImage.propTypes = {\r\n    photo: PropTypes.object.isRequired,\r\n    onPhotoClick: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    onPhotoClick: (url) => {\r\n        dispatch(selectPhoto(url));\r\n        dispatch(closeSideBar());\r\n        dispatch(setActiveTool(null));\r\n    }\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(SearchedImage);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport SearchedImage from '../SearchedImage/SearchedImage';\r\n\r\nimport './ImagesList.css';\r\n\r\nconst Column = ({ data}) => {\r\n\r\n    return (\r\n        <div className='image-list-column'>\r\n            {data && data.map((photo, i) => <SearchedImage key={i} photo={photo}/>)}\r\n        </div>\r\n    );\r\n};\r\n\r\nColumn.propTypes = {\r\n    data: PropTypes.array\r\n};\r\n\r\nexport default Column","import React from 'react';\r\n\r\nimport './LoadingIndicator.css';\r\n\r\nconst LoadingIndicator = () => (\r\n    <div className='loading-indicator'>\r\n        <div className=\"lds-ellipsis\">\r\n            <div />\r\n            <div />\r\n            <div />\r\n            <div />\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default LoadingIndicator;","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeSideBar, selectPhoto } from '../../redux/actions';\r\n\r\nimport Column from './Column';\r\nimport LoadingIndicator from '../LoadingIndicator/LoadingIndicator';\r\n\r\nimport './ImagesList.css';\r\n\r\nconst ImagesList = ({ photos, isFetching, isSearched, newPhotosLoadCount, firstLoadCount, onPhotoClick, isError }) => {\r\n\r\n    const [ photosToShow, setPhotosToShow ] = useState([]);\r\n    const [ isPhotosLoading, setIsPhotosLoading ] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setPhotosToShow(photos.slice(0, firstLoadCount));\r\n    }, [ photos, firstLoadCount ]);\r\n\r\n    const handleScroll = (e) => {\r\n        if (photos.length === photosToShow.length) {\r\n            return\r\n        }\r\n        if (photos.length - photosToShow.length < newPhotosLoadCount) {\r\n            setIsPhotosLoading(true);\r\n            setTimeout(() => {\r\n                setIsPhotosLoading(false);\r\n                setPhotosToShow(prevPhotos => (\r\n                    [\r\n                        ...prevPhotos,\r\n                        ...photos.slice(prevPhotos.length, prevPhotos.length + (photos.length - photosToShow.length))\r\n                    ]\r\n                ));\r\n            }, 500);\r\n        }\r\n        if (e.target.scrollTop + 1 >= e.target.scrollHeight - e.target.offsetHeight) {\r\n            setIsPhotosLoading(true);\r\n            setTimeout(() => {\r\n                setIsPhotosLoading(false);\r\n                setPhotosToShow(prevPhotos => (\r\n                    [\r\n                        ...prevPhotos,\r\n                        ...photos.slice(prevPhotos.length, prevPhotos.length + newPhotosLoadCount)\r\n                    ]\r\n                ));\r\n            }, 500);\r\n        }\r\n    };\r\n\r\n    if (isFetching) {\r\n        return <LoadingIndicator/>\r\n    }\r\n    if (isSearched && !photosToShow.length) {\r\n        return (\r\n            <div className='mt-5 no_res'>\r\n                <svg className=\"svg-icon\" viewBox=\"0 0 20 20\">\r\n                    <path\r\n                        fill=\"none\"\r\n                        d=\"M19.129,18.164l-4.518-4.52c1.152-1.373,1.852-3.143,1.852-5.077c0-4.361-3.535-7.896-7.896-7.896\r\n\t\t\t\t\t\t\t\tc-4.361,0-7.896,3.535-7.896,7.896s3.535,7.896,7.896,7.896c1.934,0,3.705-0.698,5.078-1.853l4.52,4.519\r\n\t\t\t\t\t\t\t\tc0.266,0.268,0.699,0.268,0.965,0C19.396,18.863,19.396,18.431,19.129,18.164z M8.567,15.028c-3.568,0-6.461-2.893-6.461-6.461\r\n\t\t\t\t\t\t\t\ts2.893-6.461,6.461-6.461c3.568,0,6.46,2.893,6.46,6.461S12.135,15.028,8.567,15.028z\">\r\n\r\n                    </path>\r\n                </svg>\r\n                <h2 className='mt-2' style={{ color: 'grey' }}>No result</h2>\r\n            </div>\r\n        )\r\n    }\r\n    if (isSearched && isError) {\r\n        return (\r\n            <div className='mt-5 no_res'>\r\n                <svg className=\"svg-icon\" viewBox=\"0 0 20 20\">\r\n                    <path\r\n                        d=\"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z\"></path>\r\n                </svg>\r\n                <h2 className='mt-2' style={{ color: 'grey' }}>No result</h2>\r\n            </div>\r\n        )\r\n    }\r\n    return (\r\n        <div\r\n            onScroll={handleScroll}\r\n            className='images_container'>\r\n            {\r\n                <div className='image-list-columns'>\r\n                    <Column data={photosToShow.slice(0, photosToShow.length / 2)}/>\r\n                    <Column data={photosToShow.slice(photosToShow.length / 2)}/>\r\n                </div>\r\n            }\r\n            {\r\n                isPhotosLoading && <LoadingIndicator/>\r\n            }\r\n        </div>\r\n    )\r\n};\r\n\r\nImagesList.propTypes = {\r\n    photos: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired,\r\n    isFetching: PropTypes.bool.isRequired,\r\n    isSearched: PropTypes.bool.isRequired,\r\n    newPhotosLoadCount: PropTypes.number.isRequired,\r\n    firstLoadCount: PropTypes.number.isRequired,\r\n    onPhotoClick: PropTypes.func.isRequired,\r\n    isError: PropTypes.bool.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    photos: state.photo.photos,\r\n    isFetching: state.photo.isFetchingPhotos,\r\n    isSearched: state.photo.isSearched,\r\n    isError: state.photo.isError\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    onPhotoClick: (url) => {\r\n        dispatch(selectPhoto(url));\r\n        dispatch(closeSideBar());\r\n    }\r\n});\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImagesList);","import React from 'react';\r\n\r\nimport SearchPanel from '../../components/SearchPanel/SearchPanel';\r\nimport ImagesList from '../../components/ImagesList/ImagesList';\r\n\r\nimport './GoogleSearchPanel.css';\r\n\r\nconst GoogleSearchPanel = () => (\r\n    <div className='google-search-panel'>\r\n        <div className='search_panel_container pt-3'>\r\n            <SearchPanel/>\r\n            <ImagesList\r\n                newPhotosLoadCount={19}\r\n                firstLoadCount={20}\r\n            />\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default GoogleSearchPanel;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeSideBar, openSideBar, selectPhoto, setActiveTool } from '../../redux/actions';\r\n\r\nimport GoogleSearchPanel from '../../containers/GoogleSearchPanel/GoogleSearchPanel.jsx';\r\n\r\nimport './Sidebar.css';\r\n\r\nconst SideBar = ({ onPhotoSelect, isOpenedSideBar,setActiveTool, openSideBar, closeSideBar, selectedPhoto }) => {\r\n\r\n    const handleToggleClick = () => {\r\n        if (isOpenedSideBar) {\r\n            closeSideBar()\r\n        } else {\r\n            openSideBar()\r\n        }\r\n    };\r\n\r\n    const onFileChange = (e) => {\r\n        if (e.target.files[0]) {\r\n            const url = URL.createObjectURL(e.target.files[0]);\r\n            onPhotoSelect(url);\r\n            closeSideBar();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"sidebar\">\r\n                <div className=\"menu-left-part\" style={{ marginLeft: isOpenedSideBar ? '0' : '-30vw' }}>\r\n                    <GoogleSearchPanel handleHide={closeSideBar}/>\r\n                </div>\r\n                <div className='menu-right-part back-opened'>\r\n                    <form>\r\n                        <label htmlFor=\"imgInput\" className='sidebar-nav-item'>\r\n                            <div className='sidebar-icons upload'/>\r\n                            <p>Upload</p>\r\n                            <input\r\n                                type=\"file\"\r\n                                name='imgInput'\r\n                                id=\"imgInput\"\r\n                                accept='image/*'\r\n                                onChange={onFileChange}\r\n                                hidden\r\n                            />\r\n                        </label>\r\n                    </form>\r\n                    <div className={`sidebar-nav-item ${isOpenedSideBar && 'open'}`} onClick={handleToggleClick}>\r\n                        <div className='sidebar-icons search'/>\r\n                        <p>Search</p>\r\n                    </div>\r\n                    <a href={selectedPhoto} download\r\n                       style={{ pointerEvents: !selectedPhoto && 'none', cursor: !selectedPhoto && 'default' }}\r\n                       className='sidebar-nav-item'>\r\n                        <div className='sidebar-icons download'/>\r\n                        <p>Download</p>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div onClick={closeSideBar} className={`sidebar-back ${isOpenedSideBar && 'visible'}`}/>\r\n        </>\r\n    )\r\n};\r\n\r\nSideBar.propTypes = {\r\n    onPhotoSelect: PropTypes.func.isRequired,\r\n    isOpenedSideBar: PropTypes.bool.isRequired,\r\n    openSideBar: PropTypes.func.isRequired,\r\n    closeSideBar: PropTypes.func.isRequired,\r\n    selectedPhoto: PropTypes.string,\r\n    setActiveTool: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isOpenedSideBar: state.isOpenedSideBar,\r\n    selectedPhoto: state.photo.selectedPhoto\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    onPhotoSelect: (url) => {\r\n        dispatch(selectPhoto(url))\r\n        dispatch(setActiveTool(null))\r\n    },\r\n    closeSideBar: () => dispatch(closeSideBar()),\r\n    openSideBar: () => dispatch(openSideBar()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SideBar);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './Button.css';\r\n\r\nexport default function Button({ onClick, children, color,className, disabled }) {\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            className={`button ${disabled && 'disabled'} ${className}`}\r\n            disabled={disabled}\r\n            style={{ background: color }}>{children}\r\n        </button>\r\n    )\r\n}\r\n\r\nButton.propTypes = {\r\n    onClick: PropTypes.func.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n    color: PropTypes.string.isRequired,\r\n    disabled: PropTypes.bool,\r\n    className: PropTypes.string\r\n};\r\n\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {applyImageChange, setActiveTool} from '../../redux/actions';\r\n\r\nimport Cropper from '../Cropper/Cropper';\r\nimport ImageFilterTool from '../ImageFilterTool/ImageFilterTool';\r\nimport ImageDrawTool from '../ImageDrawTool/ImageDrawTool';\r\nimport ImageFrameTool from '../ImageFrameTool/ImageFrameTool';\r\nimport ImageStickerTool from \"../ImageStickerTool/ImageStickerTool\";\r\n\r\nimport './ImageContainer.css';\r\n\r\nlet isDrawing = false;\r\nlet lineStyleLocal, lineWidthLocal, lineColorLocal;\r\n\r\nlet stickerImageX = 50;\r\nlet stickerImageY = 50;\r\nlet imageWidth, imageRight, imageBottom, imageHeight, startX, startY, imageSticker;\r\n\r\nconst pi2 = Math.PI * 2;\r\nconst resizerRadius = 8;\r\nconst rr = resizerRadius * resizerRadius;\r\nlet draggingResizer = {\r\n    x: 0,\r\n    y: 0\r\n};\r\nlet draggingImage = false;\r\n\r\n\r\nconst ImageContainer = ({selectedPhoto, activeTool, setActiveTool, activeSubTool, onImageChangeApply}) => {\r\n\r\n    const canvas = useRef();\r\n    const canvasSticker = useRef();\r\n\r\n    const [canvasCords, setCanvasCords] = useState(null);\r\n    const [img, setImg] = useState(null);\r\n\r\n    const [lineWidth, setLineWidth] = useState('1');\r\n    const [lineColor, setLineColor] = useState('#000000');\r\n    const [lineStyle, setLineStyle] = useState('round');\r\n\r\n    useEffect(() => {\r\n        if (selectedPhoto) {\r\n            onImageChangeApply(selectedPhoto);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        draw(selectedPhoto);\r\n    }, [selectedPhoto]);\r\n\r\n    const onMouseUpDraw = () => {\r\n        stopDrawingLine();\r\n        const url = canvas.current.toDataURL('image/jpeg');\r\n        onImageChangeApply(url);\r\n    };\r\n\r\n    useEffect(() => {\r\n        console.log(activeTool)\r\n\r\n        if (activeTool === 'draw') {\r\n            canvas.current.addEventListener('mousedown', startDrawingLine);\r\n            canvas.current.addEventListener('mouseup', onMouseUpDraw);\r\n            canvas.current.addEventListener('mouseout', stopDrawingLine);\r\n            canvas.current.addEventListener('mousemove', drawLine);\r\n        }\r\n\r\n        if (activeTool === 'stickers') {\r\n            canvasSticker.current.addEventListener('mousedown', handleMouseDown);\r\n            canvasSticker.current.addEventListener('mouseup', handleMouseUp);\r\n            canvasSticker.current.addEventListener('mouseout', handleMouseOut);\r\n            canvasSticker.current.addEventListener('mousemove', handleMouseMove);\r\n        }\r\n\r\n        return () => {\r\n            canvas.current.removeEventListener('mousedown', startDrawingLine);\r\n            canvas.current.removeEventListener('mouseup', onMouseUpDraw);\r\n            canvas.current.removeEventListener('mouseout', stopDrawingLine);\r\n            canvas.current.removeEventListener('mousemove', drawLine);\r\n\r\n            if (canvasSticker.current) {\r\n                canvasSticker.current.removeEventListener('mousedown', handleMouseDown);\r\n                canvasSticker.current.removeEventListener('mouseup', handleMouseUp);\r\n                canvasSticker.current.removeEventListener('mouseout', handleMouseOut);\r\n                canvasSticker.current.removeEventListener('mousemove', handleMouseMove);\r\n            }\r\n        }\r\n\r\n    }, [activeTool]);\r\n\r\n    const provideCord = (element) => {\r\n        return element.getBoundingClientRect()\r\n    };\r\n\r\n    function draw(src, frameUrl) {\r\n        const ctx = canvas.current.getContext('2d');\r\n        const img = new Image();\r\n        img.src = src;\r\n        img.crossOrigin = 'anonymous';\r\n        img.onload = () => {\r\n            const ratio = img.width / img.height;\r\n            canvas.current.height = 500;\r\n            canvas.current.width = 500 * ratio;\r\n            ctx.drawImage(img, 0, 0, canvas.current.width, canvas.current.height);\r\n            setCanvasCords(provideCord(canvas.current))\r\n        };\r\n\r\n        if (frameUrl) {\r\n            const frameImg = new Image();\r\n            frameImg.src = frameUrl;\r\n            frameImg.crossOrigin = 'anonymous';\r\n            frameImg.onload = () => {\r\n                ctx.drawImage(frameImg, 0, 0, canvas.current.width, canvas.current.height);\r\n            }\r\n        }\r\n        setImg(img)\r\n    }\r\n\r\n    function handleCrop({left, top, width, height}) {\r\n        const url = canvas.current.toDataURL('image/jpeg')\r\n        const ctx = canvas.current.getContext('2d');\r\n        const img = new Image();\r\n        img.src = url;\r\n        img.onload = () => {\r\n            const ratio = width / height;\r\n            const cropDimensions = {\r\n                left: left - canvasCords.left,\r\n                top: top - canvasCords.top,\r\n                width: width,\r\n                height: height\r\n            };\r\n\r\n            canvas.current.width = 500 * ratio;\r\n            canvas.current.height = 500;\r\n            ctx.clearRect(0, 0, canvas.current.width, canvas.current.height);\r\n            ctx.drawImage(\r\n                img,\r\n                cropDimensions.left,\r\n                cropDimensions.top,\r\n                cropDimensions.width,\r\n                cropDimensions.height,\r\n                0,\r\n                0,\r\n                canvas.current.width,\r\n                canvas.current.height);\r\n            setCanvasCords(provideCord(canvas.current));\r\n            setActiveTool(null)\r\n            const newimg = new Image();\r\n            const url = canvas.current.toDataURL('image/jpeg');\r\n            newimg.src = url;\r\n            setImg(newimg)\r\n            onImageChangeApply(url);\r\n        }\r\n    }\r\n\r\n    const handleLineStyle = (value) => {\r\n        setLineStyle(value)\r\n    };\r\n    const handleLineWidth = (value) => {\r\n        setLineWidth(value)\r\n    };\r\n    const handleLineColor = (value) => {\r\n        setLineColor(value)\r\n    };\r\n\r\n    const prepareCanvasImage = () => {\r\n        const url = canvas.current.toDataURL('image/jpeg');\r\n        const ctx = canvas.current.getContext('2d');\r\n        const width = canvas.current.width;\r\n        const height = canvas.current.height;\r\n        const image = new Image;\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        image.src = url;\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        ctx.save();\r\n        return {ctx, image, width, height};\r\n    };\r\n\r\n    const handleBlurFilter = (value) => {\r\n        const {ctx, width, image, height} = prepareCanvasImage();\r\n        ctx.filter = `blur(${value / 4}px)`;\r\n        ctx.drawImage(image, width, height);\r\n\r\n    };\r\n\r\n\r\n    const handleBrightnessFilter = (value) => {\r\n        const {ctx, image, width, height} = prepareCanvasImage();\r\n\r\n        if (value < 0) {\r\n            ctx.globalCompositeOperation = 'multiply';\r\n            ctx.fillStyle = 'black';\r\n            ctx.globalAlpha = -value / 100;\r\n            ctx.fillRect(0, 0, width, height);\r\n        } else if (value > 0) {\r\n            ctx.fillStyle = 'white';\r\n            ctx.globalCompositeOperation = 'lighten';\r\n            ctx.globalAlpha = 1;\r\n            ctx.drawImage(image, 0, 0);\r\n            ctx.globalAlpha = value / 100;\r\n            ctx.fillRect(0, 0, width, height);\r\n        }\r\n        ctx.restore();\r\n    };\r\n\r\n    const handleGrayscaleFilter = (value) => {\r\n        const {ctx, width, height} = prepareCanvasImage();\r\n        if (value <= 100) {\r\n            ctx.globalCompositeOperation = 'color';\r\n            ctx.fillStyle = 'black';\r\n            ctx.globalAlpha = value / 100;\r\n            ctx.fillRect(0, 0, width, height);\r\n        }\r\n        ctx.restore();\r\n    };\r\n\r\n    const handleColorChangeFilter = (rangeValue) => {\r\n        const {ctx, width, height} = prepareCanvasImage();\r\n        if (lineColor === '#000000') {\r\n            ctx.globalCompositeOperation = 'multiply';\r\n        } else {\r\n            ctx.globalCompositeOperation = 'lighten';\r\n        }\r\n        ctx.fillStyle = lineColor;\r\n        ctx.globalAlpha = rangeValue / 100;\r\n        ctx.fillRect(0, 0, width, height);\r\n        ctx.restore();\r\n    };\r\n\r\n    const handleSaturationFilter = (rangeValue) => {\r\n        const {ctx, width, height} = prepareCanvasImage();\r\n        ctx.globalCompositeOperation = 'saturation';\r\n        ctx.fillStyle = 'red';\r\n        ctx.globalAlpha = rangeValue / 100;\r\n        ctx.fillRect(0, 0, width, height);\r\n        ctx.restore();\r\n    };\r\n\r\n    const handleContrastFilter = (rangeValue) => {\r\n        const {ctx, width, image, height} = prepareCanvasImage();\r\n        ctx.filter = `contrast(${rangeValue / 4})`;\r\n        ctx.drawImage(image, width, height);\r\n    };\r\n\r\n\r\n    const handleSelectedSticker = (frameUrl) => {\r\n        const img = new Image();\r\n        img.src = frameUrl;\r\n        img.crossOrigin = 'anonymous';\r\n        img.onload = () => {\r\n            imageWidth = img.width;\r\n            imageHeight = img.height;\r\n            imageRight = stickerImageX + imageWidth;\r\n            imageBottom = stickerImageY + imageHeight;\r\n            imageSticker = img;\r\n            canvasSticker.current.height = canvas.current.height;\r\n            canvasSticker.current.width = canvas.current.width;\r\n            drawSticker(true, false, frameUrl);\r\n        };\r\n        img.src = frameUrl;\r\n    };\r\n\r\n    const handleApplySticker = () => {\r\n        const ctx = canvas.current.getContext('2d');\r\n        drawSticker(false, false)\r\n        ctx.drawImage(canvasSticker.current, 0, 0);\r\n        const url = canvas.current.toDataURL('image/jpeg');\r\n        draw(url)\r\n        onImageChangeApply(url);\r\n        setActiveTool(null)\r\n    };\r\n\r\n    const drawSticker = (withAnchors, withBorders) => {\r\n        const ctx = canvasSticker.current.getContext('2d');\r\n        // clear the canvas\r\n        ctx.clearRect(0, 0, canvasSticker.current.width, canvasSticker.current.height);\r\n        // debugger\r\n        ctx.drawImage(imageSticker, 0, 0, imageSticker.width, imageSticker.height, stickerImageX, stickerImageY, imageWidth, imageHeight);\r\n        if (withAnchors) {\r\n            drawDragAnchor(stickerImageX, stickerImageY, ctx);\r\n            drawDragAnchor(imageRight, stickerImageY, ctx);\r\n            drawDragAnchor(imageRight, imageBottom, ctx);\r\n            drawDragAnchor(stickerImageX, imageBottom, ctx);\r\n        }\r\n        if (withBorders) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(stickerImageX, stickerImageY);\r\n            ctx.lineTo(imageRight, stickerImageY);\r\n            ctx.lineTo(imageRight, imageBottom);\r\n            ctx.lineTo(stickerImageX, imageBottom);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n        }\r\n    };\r\n\r\n    function drawDragAnchor(x, y, ctx) {\r\n        ctx.beginPath();\r\n        ctx.arc(x, y, resizerRadius, 0, pi2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n\r\n    function handleMouseDown(e) {\r\n        if (imageSticker) {\r\n            const offsetX = canvasCords.left;\r\n            const offsetY = canvasCords.top;\r\n            startX = parseInt(e.clientX - offsetX);\r\n            startY = parseInt(e.clientY - offsetY);\r\n            draggingResizer = anchorHitTest(startX, startY);\r\n            draggingImage = draggingResizer < 0 && hitImage(startX, startY);\r\n        }\r\n    }\r\n\r\n    function handleMouseUp(e) {\r\n        if (imageSticker) {\r\n            draggingResizer = -1;\r\n            draggingImage = false;\r\n            drawSticker(true, false);\r\n        }\r\n    }\r\n\r\n    function handleMouseOut(e) {\r\n        if (imageSticker) {\r\n            handleMouseUp(e);\r\n        }\r\n    }\r\n\r\n    function handleMouseMove(e) {\r\n        if (!imageSticker) {\r\n            return\r\n        }\r\n\r\n        const offsetX = canvasCords.left;\r\n        const offsetY = canvasCords.top;\r\n        if (draggingResizer > -1) {\r\n            const mouseX = parseInt(e.clientX - offsetX);\r\n            const mouseY = parseInt(e.clientY - offsetY);\r\n\r\n            // resize the image\r\n            switch (draggingResizer) {\r\n                case 0:\r\n                    //top-left\r\n                    stickerImageX = mouseX;\r\n                    imageWidth = imageRight - mouseX;\r\n                    stickerImageY = mouseY;\r\n                    imageHeight = imageBottom - mouseY;\r\n                    break;\r\n                case 1:\r\n                    //top-right\r\n                    stickerImageY = mouseY;\r\n                    imageWidth = mouseX - stickerImageX;\r\n                    imageHeight = imageBottom - mouseY;\r\n                    break;\r\n                case 2:\r\n                    //bottom-right\r\n                    imageWidth = mouseX - stickerImageX;\r\n                    imageHeight = mouseY - stickerImageY;\r\n                    break;\r\n                case 3:\r\n                    //bottom-left\r\n                    stickerImageX = mouseX;\r\n                    imageWidth = imageRight - mouseX;\r\n                    imageHeight = mouseY - stickerImageY;\r\n                    break;\r\n            }\r\n\r\n            if (imageWidth < 25) {\r\n                imageWidth = 25;\r\n            }\r\n            if (imageHeight < 25) {\r\n                imageHeight = 25;\r\n            }\r\n\r\n            // set the image right and bottom\r\n            imageRight = stickerImageX + imageWidth;\r\n            imageBottom = stickerImageY + imageHeight;\r\n\r\n            // redraw the image with resizing anchors\r\n            drawSticker(true, true);\r\n\r\n        } else if (draggingImage) {\r\n\r\n            const mouseX = parseInt(e.clientX - offsetX);\r\n            const mouseY = parseInt(e.clientY - offsetY);\r\n\r\n            // move the image by the amount of the latest drag\r\n            const dx = mouseX - startX;\r\n            const dy = mouseY - startY;\r\n            stickerImageX += dx;\r\n            stickerImageY += dy;\r\n            imageRight += dx;\r\n            imageBottom += dy;\r\n            // reset the startXY for next time\r\n            startX = mouseX;\r\n            startY = mouseY;\r\n\r\n            // redraw the image with border\r\n            drawSticker(false, true);\r\n        }\r\n    }\r\n\r\n    function anchorHitTest(x, y) {\r\n        let dx, dy;\r\n\r\n        // top-left\r\n        dx = x - stickerImageX;\r\n        dy = y - stickerImageY;\r\n        if (dx * dx + dy * dy <= rr) {\r\n            return (0);\r\n        }\r\n        // top-right\r\n        dx = x - imageRight;\r\n        dy = y - stickerImageY;\r\n        if (dx * dx + dy * dy <= rr) {\r\n            return (1);\r\n        }\r\n        // bottom-right\r\n        dx = x - imageRight;\r\n        dy = y - imageBottom;\r\n        if (dx * dx + dy * dy <= rr) {\r\n            return (2);\r\n        }\r\n        // bottom-left\r\n        dx = x - stickerImageX;\r\n        dy = y - imageBottom;\r\n        if (dx * dx + dy * dy <= rr) {\r\n            return (3);\r\n        }\r\n        return (-1);\r\n\r\n    }\r\n\r\n    function hitImage(x, y) {\r\n        return (x > stickerImageX && x < stickerImageX + imageWidth && y > stickerImageY && y < stickerImageY + imageHeight);\r\n    }\r\n\r\n    const handleApply = () => {\r\n        const url = canvas.current.toDataURL('image/jpeg');\r\n        draw(url);\r\n\r\n        onImageChangeApply(url);\r\n        setActiveTool(null);\r\n    };\r\n\r\n    const handleSelectedFrame = (frameUrl) => {\r\n        const {ctx} = prepareCanvasImage();\r\n        const url = canvas.current.toDataURL('image/jpeg');\r\n        draw(url, frameUrl);\r\n        ctx.restore();\r\n    };\r\n\r\n    const handleCancelApply = () => {\r\n        const {ctx} = prepareCanvasImage();\r\n        ctx.restore();\r\n    };\r\n\r\n    function startDrawingLine(e) {\r\n        const ctx = canvas.current.getContext('2d');\r\n        isDrawing = true;\r\n        ctx.beginPath();\r\n        ctx.moveTo(e.pageX - canvasCords.left, e.pageY - canvasCords.top);\r\n        ctx.strokeStyle = lineColorLocal;\r\n        ctx.lineWidth = lineWidthLocal;\r\n        ctx.lineCap = lineStyleLocal;\r\n        ctx.lineJoin = lineStyleLocal === 'round' ? 'miter' : 'bever';\r\n    }\r\n\r\n    function stopDrawingLine() {\r\n        isDrawing = false;\r\n    }\r\n\r\n    function drawLine(e) {\r\n        if (isDrawing) {\r\n            const ctx = canvas.current.getContext('2d');\r\n            ctx.lineTo(e.pageX - canvasCords.left, e.pageY - canvasCords.top);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        lineStyleLocal = lineStyle;\r\n    }, [lineStyle]);\r\n\r\n    useEffect(() => {\r\n        lineWidthLocal = lineWidth;\r\n    }, [lineWidth]);\r\n\r\n    useEffect(() => {\r\n        lineColorLocal = lineColor;\r\n    }, [lineColor]);\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"img-box\">\r\n                {activeTool === 'crop' && <Cropper handleCrop={handleCrop} canvasCords={canvasCords}/>}\r\n                <div className={`cnvs edit-img ${activeTool === 'draw' ? 'edit-img-draw' : ''}`}>\r\n                    <canvas ref={canvas} id=\"canvas\"/>\r\n                    {activeTool === 'stickers' &&\r\n                    <canvas ref={canvasSticker} id=\"canvasSticker\" className=\"cnvs\"/>\r\n                    }\r\n                </div>\r\n            </div>\r\n            {activeTool === 'filter' &&\r\n            <ImageFilterTool\r\n                activeSubTool={activeSubTool}\r\n                lineColor={lineColor}\r\n                setActiveTool={setActiveTool}\r\n                handleBrightnessFilter={handleBrightnessFilter}\r\n                handleBlurFilter={handleBlurFilter}\r\n                handleGrayscaleFilter={handleGrayscaleFilter}\r\n                handleColorChangeFilter={handleColorChangeFilter}\r\n                handleContrastFilter={handleContrastFilter}\r\n                handleSaturationFilter={handleSaturationFilter}\r\n                handleApplyFilter={handleApply}\r\n                handleLineColor={handleLineColor}\r\n                handleCancelApplyFilter={handleCancelApply}\r\n            />}\r\n            {activeTool === 'draw' &&\r\n            <ImageDrawTool\r\n                handleLineStyle={handleLineStyle}\r\n                handleLineWidth={handleLineWidth}\r\n                handleLineColor={handleLineColor}\r\n                lineWidth={lineWidth}\r\n                lineColor={lineColor}\r\n                lineStyle={lineStyle}\r\n            />}\r\n            {activeTool === 'frame' &&\r\n            <ImageFrameTool\r\n                handleSelectedFrame={handleSelectedFrame}\r\n                handleApplyFrame={handleApply}\r\n                handleCancelApplyFrame={handleCancelApply}\r\n            />}\r\n            {activeTool === 'stickers' &&\r\n            <ImageStickerTool\r\n                handleSelectedSticker={handleSelectedSticker}\r\n                handleApplySticker={handleApplySticker}\r\n            />}\r\n        </div>\r\n    )\r\n};\r\n\r\nImageContainer.propTypes = {\r\n    selectedPhoto: PropTypes.string,\r\n    activeTool: PropTypes.string,\r\n    setActiveTool: PropTypes.func.isRequired,\r\n    activeSubTool: PropTypes.string,\r\n    onImageChangeApply: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    activeTool: state.tool.activeTool,\r\n    selectedPhoto: state.photo.selectedPhoto\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    setActiveTool: (tool) => dispatch(setActiveTool(tool)),\r\n    onImageChangeApply: url => {\r\n        dispatch(applyImageChange(url));\r\n    }\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageContainer)","import React, { useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Button from '../Button/Button';\r\n\r\nimport './Cropper.css';\r\n\r\nconst Cropper = ({ canvasCords, handleCrop }) => {\r\n\r\n    const crop = useRef();\r\n    const requestRef = useRef();\r\n    // Minimum resizable area\r\n    const minWidth = 60;\r\n    const minHeight = 40;\r\n    // Thresholds\r\n    const MARGINS = 4;\r\n    // End of what's configurable.\r\n    let clicked = null;\r\n    let onRightEdge, onBottomEdge, onLeftEdge, onTopEdge;\r\n    let b, x, y, e;\r\n    let redraw = false;\r\n\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('mousemove', onMove);\r\n        document.addEventListener('mouseup', onUp);\r\n        document.addEventListener('touchmove', onTouchMove);\r\n        document.addEventListener('touchend', onTouchEnd);\r\n        requestRef.current = requestAnimationFrame(animate);\r\n\r\n        return () => {\r\n            removeAllEvents()\r\n        }\r\n\r\n    }, []);\r\n\r\n    const removeAllEvents = () => {\r\n        document.removeEventListener('mousemove', onMove);\r\n        document.removeEventListener('mouseup', onUp);\r\n        document.removeEventListener('touchmove', onTouchMove);\r\n        document.removeEventListener('touchend', onTouchEnd);\r\n        cancelAnimationFrame(requestRef.current)\r\n    };\r\n\r\n    const handleCropping = () => {\r\n        const cropCords = {\r\n            left: crop.current.getBoundingClientRect().left,\r\n            right: crop.current.getBoundingClientRect().right,\r\n            top: crop.current.getBoundingClientRect().top,\r\n            bottom: crop.current.getBoundingClientRect().bottom,\r\n            height: crop.current.getBoundingClientRect().height,\r\n            width: crop.current.getBoundingClientRect().width,\r\n        };\r\n        removeAllEvents();\r\n        handleCrop(cropCords);\r\n    };\r\n\r\n    const onTouchDown = (e) => {\r\n        onDown(e.touches[0]);\r\n        e.preventDefault();\r\n    };\r\n\r\n    const onTouchMove = (e) => {\r\n        onMove(e.touches[0]);\r\n    };\r\n\r\n    const onTouchEnd = (e) => {\r\n        if (e.touches.length === 0) onUp(e.changedTouches[0]);\r\n    };\r\n\r\n    const onMouseDown = (e) => {\r\n        onDown(e);\r\n        e.preventDefault();\r\n    };\r\n\r\n    const onDown = (e) => {\r\n        calc(e);\r\n\r\n        let isResizing = onRightEdge || onBottomEdge || onTopEdge || onLeftEdge;\r\n\r\n\r\n        clicked = {\r\n            x: x,\r\n            y: y,\r\n            cx: e.clientX,\r\n            cy: e.clientY,\r\n            w: b.width,\r\n            h: b.height,\r\n            isResizing: isResizing,\r\n            isMoving: !isResizing && canMove(true),\r\n            onTopEdge: onTopEdge,\r\n            onLeftEdge: onLeftEdge,\r\n            onRightEdge: onRightEdge,\r\n            onBottomEdge: onBottomEdge\r\n        };\r\n\r\n    };\r\n\r\n    const canMove = (bool) => {\r\n        return bool;\r\n    };\r\n\r\n    const calc = (e) => {\r\n        b = crop.current.getBoundingClientRect();\r\n        x = e.clientX - b.left;\r\n        y = e.clientY - b.top;\r\n\r\n        onTopEdge = y < MARGINS;\r\n        onLeftEdge = x < MARGINS;\r\n        onRightEdge = x >= b.width - MARGINS;\r\n        onBottomEdge = y >= b.height - MARGINS;\r\n    }\r\n\r\n    const onMove = (ee) => {\r\n\r\n        calc(ee);\r\n        e = ee;\r\n        redraw = true;\r\n    };\r\n\r\n    const animate = () => {\r\n        requestRef.current = requestAnimationFrame(animate);\r\n        const cropCords = {\r\n            left: crop.current.getBoundingClientRect().left,\r\n            right: crop.current.getBoundingClientRect().right,\r\n            top: crop.current.getBoundingClientRect().top,\r\n            bottom: crop.current.getBoundingClientRect().bottom,\r\n            height: crop.current.getBoundingClientRect().height,\r\n            width: crop.current.getBoundingClientRect().width,\r\n        };\r\n\r\n        if (!redraw) return;\r\n\r\n        redraw = false;\r\n\r\n        if (clicked && clicked.isResizing) {\r\n            if (clicked.onRightEdge) {\r\n                if (e.clientX > canvasCords.right) {\r\n                    crop.current.style.width = canvasCords.right - cropCords.left - 1 + 'px'\r\n                } else {\r\n                    crop.current.style.width = Math.max(x, minWidth) + 'px';\r\n                }\r\n            }\r\n            if (clicked.onBottomEdge) {\r\n                if (e.clientY > canvasCords.bottom) {\r\n                    crop.current.style.height = canvasCords.bottom - cropCords.top - 1 + 'px'\r\n                } else {\r\n                    crop.current.style.height = Math.max(y, minHeight) + 'px'\r\n                }\r\n            }\r\n\r\n            if (clicked.onLeftEdge && e.clientX > canvasCords.left) {\r\n                let currentWidth = Math.max(clicked.cx - e.clientX + clicked.w, minWidth);\r\n                if (currentWidth > minWidth) {\r\n                    crop.current.style.width = currentWidth + 'px';\r\n                    crop.current.style.left = e.clientX + 'px';\r\n                }\r\n            }\r\n\r\n            if (clicked.onTopEdge && e.clientY > canvasCords.top) {\r\n\r\n                let currentHeight = Math.max(\r\n                    clicked.cy - 3 - e.clientY + clicked.h,\r\n                    minHeight\r\n                );\r\n\r\n                if (currentHeight > minHeight) {\r\n                    crop.current.style.height = currentHeight + 'px';\r\n                    crop.current.style.top = e.clientY + 'px';\r\n                }\r\n            }\r\n\r\n            return;\r\n        }\r\n        if (clicked && clicked.isMoving) {\r\n            const limit = {\r\n                left: e.clientX < canvasCords.left + clicked.x,\r\n                top: e.clientY < canvasCords.top + clicked.y,\r\n                right: e.clientX > canvasCords.right - (cropCords.width - clicked.x),\r\n                bottom: e.clientY > canvasCords.bottom - (cropCords.height - clicked.y)\r\n            };\r\n\r\n            if (limit.bottom && limit.left) {\r\n                crop.current.style.top = canvasCords.bottom - cropCords.height + 'px';\r\n                crop.current.style.left = canvasCords.left + 'px';\r\n            } else if (limit.bottom && limit.right) {\r\n                crop.current.style.left = canvasCords.right - cropCords.width + 'px';\r\n                crop.current.style.top = canvasCords.bottom - cropCords.height + 'px';\r\n            } else if (limit.top && limit.right) {\r\n                crop.current.style.top = canvasCords.top + 'px';\r\n                crop.current.style.left = canvasCords.right - cropCords.width + 'px';\r\n            } else if (limit.top && limit.left) {\r\n                crop.current.style.top = canvasCords.top + 'px';\r\n                crop.current.style.left = canvasCords.left + 'px';\r\n            } else if (limit.left) {\r\n                crop.current.style.top = e.clientY - clicked.y + 'px';\r\n                crop.current.style.left = canvasCords.left + 'px';\r\n            } else if (limit.right) {\r\n                crop.current.style.top = e.clientY - clicked.y + 'px';\r\n                crop.current.style.left = canvasCords.right - cropCords.width + 'px';\r\n            } else if (limit.top) {\r\n                crop.current.style.left = e.clientX - clicked.x + 'px';\r\n                crop.current.style.top = canvasCords.top + 'px';\r\n            } else if (limit.bottom) {\r\n                crop.current.style.left = e.clientX - clicked.x + 'px';\r\n                crop.current.style.top = canvasCords.bottom - cropCords.height + 'px';\r\n            } else {\r\n                crop.current.style.top = e.clientY - clicked.y + 'px';\r\n                crop.current.style.left = e.clientX - clicked.x + 'px';\r\n            }\r\n\r\n            return;\r\n        }\r\n        // style cursor\r\n        if ((onRightEdge && onBottomEdge) || (onLeftEdge && onTopEdge)) {\r\n            crop.current.style.cursor = 'nwse-resize';\r\n        } else if ((onRightEdge && onTopEdge) || (onBottomEdge && onLeftEdge)) {\r\n            crop.current.style.cursor = 'nesw-resize';\r\n        } else if (onRightEdge || onLeftEdge) {\r\n            crop.current.style.cursor = 'ew-resize';\r\n        } else if (onBottomEdge || onTopEdge) {\r\n            crop.current.style.cursor = 'ns-resize';\r\n        } else if (canMove(true)) {\r\n            crop.current.style.cursor = 'move';\r\n        } else {\r\n            crop.current.style.cursor = 'default';\r\n        }\r\n    }\r\n\r\n    const onUp = (e) => {\r\n        calc(e);\r\n        clicked = null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div ref={crop} onMouseDown={onMouseDown} onTouchStart={onTouchDown} id=\"crop\">\r\n                <div className=\"angles left-middle\"/>\r\n                <div className=\"angles top-middle\"/>\r\n                <div className=\"angles right-middle\"/>\r\n                <div className=\"angles bottom-middle\"/>\r\n                <div className=\"angles left-top\"/>\r\n                <div className=\"angles right-top\"/>\r\n                <div className=\"angles right-bottom\"/>\r\n                <div className=\"angles left-bottom\"/>\r\n            </div>\r\n            <Button color='black' onClick={handleCropping} className='crop-button'>Crop</Button>\r\n        </>\r\n    )\r\n}\r\n\r\nCropper.propTypes = {\r\n    canvasCords: PropTypes.object.isRequired,\r\n    handleCrop: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Cropper;","import React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Button from '../Button/Button';\r\n\r\nimport './ImageFilterTool.css';\r\n\r\n\r\nconst ImageFilterTool = ({\r\n     handleBrightnessFilter,\r\n     handleBlurFilter,\r\n     handleGrayscaleFilter,\r\n     handleColorChangeFilter,\r\n     handleContrastFilter,\r\n     handleSaturationFilter,\r\n     handleApplyFilter,\r\n     handleLineColor,\r\n     activeSubTool,\r\n     lineColor,\r\n     handleCancelApplyFilter\r\n}) => {\r\n\r\n    const [rangeValue, setRangeValue] = useState(0);\r\n\r\n    let isApply = false;\r\n\r\n    const handleFilterRange = (event) => {\r\n        isApply = false;\r\n        const value = event.target.value;\r\n        setRangeValue(event.target.value)\r\n        switch (activeSubTool) {\r\n            case 'filter-brightness':\r\n                handleBrightnessFilter(value);\r\n                break;\r\n            case 'filter-blur':\r\n                handleBlurFilter(value);\r\n                break;\r\n            case 'filter-grayscale':\r\n                handleGrayscaleFilter(value);\r\n                break;\r\n            case 'filter-color':\r\n                handleColorChangeFilter(value,);\r\n                break;\r\n            case 'filter-saturation':\r\n                handleSaturationFilter(value,);\r\n                break;\r\n            case 'filter-contrast':\r\n                handleContrastFilter(value,);\r\n                break;\r\n            default:\r\n        }\r\n    };\r\n\r\n    const onLineColor = (e) => {\r\n        handleLineColor(e.target.value)\r\n    };\r\n    const onApply = () => {\r\n        isApply = true;\r\n        handleApplyFilter();\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (!isApply) handleCancelApplyFilter()\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className='image-filter-tools'>\r\n            {activeSubTool &&\r\n            <>\r\n                <div md=\"auto\">\r\n                    <Button className='apply-button' color='#2980b9' onClick={onApply}>Apply</Button>\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"formControlRange\">Color: {rangeValue}</label>\r\n                    <input\r\n                        type=\"range\"\r\n                        min={activeSubTool === 'filter-brightness' ? '-100' : '0'}\r\n                        max=\"100\"\r\n                        value={rangeValue}\r\n                        step=\"1\"\r\n                        onChange={handleFilterRange}/>\r\n                </div>\r\n            </>\r\n            }\r\n            {activeSubTool === 'filter-color' &&\r\n            <div className='image-filter-input'>\r\n                <input\r\n                    type=\"color\"\r\n                    className=\"form-control\"\r\n                    value={lineColor}\r\n                    onChange={onLineColor}\r\n                    id=\"color\"/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n};\r\n\r\nImageFilterTool.propTypes = {\r\n    handleBrightnessFilter: PropTypes.func.isRequired,\r\n    handleGrayscaleFilter: PropTypes.func.isRequired,\r\n    handleColorChangeFilter: PropTypes.func.isRequired,\r\n    handleContrastFilter: PropTypes.func.isRequired,\r\n    handleSaturationFilter: PropTypes.func.isRequired,\r\n    handleApplyFilter: PropTypes.func.isRequired,\r\n    handleBlurFilter: PropTypes.func.isRequired,\r\n    handleCancelApplyFilter: PropTypes.func.isRequired,\r\n    activeSubTool: PropTypes.string,\r\n    lineColor: PropTypes.string.isRequired,\r\n    handleLineColor: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    activeSubTool: state.tool.activeSubTool\r\n});\r\n\r\nexport default connect(mapStateToProps)(ImageFilterTool);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './ImageDrawTool..css';\r\n\r\nconst ImageDrawTool = ({ lineStyle, lineWidth, lineColor, handleLineStyle, handleLineWidth, handleLineColor }) => {\r\n    const onLineStyle = (e) => {\r\n        handleLineStyle(e.target.value)\r\n    };\r\n    const onLineWidth = (e) => {\r\n        handleLineWidth(e.target.value)\r\n    };\r\n    const onLineColor = (e) => {\r\n        handleLineColor(e.target.value)\r\n    };\r\n    return (\r\n        <div className='draw-image-tools'>\r\n            <div>\r\n                <strong>Line style</strong>\r\n                <div className='line-style-ratios'>\r\n                    <div>\r\n                        <input\r\n                            type=\"radio\"\r\n                            name=\"lineStyle\"\r\n                            id=\"lineStyle1\"\r\n                            value=\"round\"\r\n                            onChange={onLineStyle}\r\n                            checked={lineStyle === 'round'}\r\n                        />\r\n                        <label htmlFor=\"lineStyle1\">\r\n                            Round\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <input\r\n                            type=\"radio\"\r\n                            name=\"lineStyle\"\r\n                            id=\"lineStyle2\"\r\n                            value=\"square\"\r\n                            onChange={onLineStyle}\r\n                            checked={lineStyle === 'square'}\r\n                        />\r\n                        <label htmlFor=\"lineStyle2\">\r\n                            Square\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <label htmlFor=\"formControlRange\">Line Thickness: {lineWidth}</label>\r\n                <input\r\n                    type=\"range\"\r\n                    value={lineWidth}\r\n                    onChange={onLineWidth}\r\n                    max={20}\r\n                    step={0.1}\r\n                    min={0.1}\r\n                    id=\"formControlRange\"/>\r\n            </div>\r\n            <div>\r\n                <label htmlFor=\"color\"><strong>Color</strong></label>\r\n                <input\r\n                    type=\"color\"\r\n                    value={lineColor}\r\n                    onChange={onLineColor}\r\n                    id=\"color\"/>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nImageDrawTool.propTypes = {\r\n    handleLineStyle: PropTypes.func,\r\n    handleLineColor: PropTypes.func,\r\n    handleLineWidth: PropTypes.func,\r\n    lineStyle: PropTypes.string.isRequired,\r\n    lineWidth: PropTypes.string.isRequired,\r\n    lineColor: PropTypes.string.isRequired\r\n};\r\n\r\nexport default ImageDrawTool;\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Button from '../Button/Button';\r\n\r\nimport './ImageFrameTool.css';\r\n\r\nconst framesBaseUrl = `${window.location.origin}/frames/`;\r\nconst birthdayFramesUrl = `${framesBaseUrl}/Birthday`;\r\nconst loveFramesUrl = `${framesBaseUrl}/Love`;\r\nconst partyTimeFramesUrl = `${framesBaseUrl}/PartyTime`;\r\n\r\nconst ImageFrameTool = ({\r\n     activeSubTool,\r\n     handleSelectedFrame,\r\n     handleApplyFrame,\r\n     handleCancelApplyFrame\r\n}) => {\r\n    const [activeFrame, setActiveFrame] = useState('');\r\n\r\n    const birthdayFrame = [\r\n        `${birthdayFramesUrl}/Birthday_1.png`,\r\n        `${birthdayFramesUrl}/Birthday_2.png`,\r\n        `${birthdayFramesUrl}/Birthday_3.png`,\r\n        `${birthdayFramesUrl}/Birthday_4.png`,\r\n        `${birthdayFramesUrl}/Birthday_5.png`,\r\n        `${birthdayFramesUrl}/Birthday_6.png`,\r\n        `${birthdayFramesUrl}/Birthday_7.png`,\r\n        `${birthdayFramesUrl}/Birthday_8.png`\r\n    ];\r\n    const loveFrame = [\r\n        `${loveFramesUrl}/Love_1.png`,\r\n        `${loveFramesUrl}/Love_2.png`,\r\n        `${loveFramesUrl}/Love_3.png`,\r\n        `${loveFramesUrl}/Love_4.png`,\r\n        `${loveFramesUrl}/Love_5.png`,\r\n        `${loveFramesUrl}/Love_6.png`,\r\n        `${loveFramesUrl}/Love_7.png`,\r\n        `${loveFramesUrl}/Love_8.png`\r\n    ];\r\n    const partyTimeFrame = [\r\n        `${partyTimeFramesUrl}/PartyTime_1.png`,\r\n        `${partyTimeFramesUrl}/PartyTime_2.png`,\r\n        `${partyTimeFramesUrl}/PartyTime_3.png`,\r\n        `${partyTimeFramesUrl}/PartyTime_4.png`,\r\n    ];\r\n\r\n    let isApply = false;\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (!isApply) handleCancelApplyFrame()\r\n        }\r\n    },);\r\n\r\n    const handleSelectFrame = (index) => {\r\n        return (\r\n            () => {\r\n                isApply = false;\r\n                switch (activeSubTool) {\r\n                    case 'birthday':\r\n                        setActiveFrame('birthday' + index);\r\n                        handleSelectedFrame(birthdayFrame[index]);\r\n                        break;\r\n                    case 'love':\r\n                        setActiveFrame('love' + index);\r\n                        handleSelectedFrame(loveFrame[index]);\r\n                        break;\r\n                    case 'party-time':\r\n                        setActiveFrame('partyTime' + index);\r\n                        handleSelectedFrame(partyTimeFrame[index]);\r\n                        break;\r\n                    default:\r\n                }\r\n            }\r\n        )\r\n    };\r\n    const onApply = () => {\r\n        isApply = true;\r\n        handleApplyFrame();\r\n    };\r\n\r\n    return (\r\n        <div className='image-frame'>\r\n            {activeSubTool && (activeSubTool === 'birthday' || activeSubTool === 'love' || activeSubTool === 'party-time') &&\r\n            <>\r\n                <div>\r\n                    <Button className='apply-button' color='#2980b9' onClick={onApply}>Apply</Button>\r\n                </div>\r\n                {\r\n                    activeSubTool === 'birthday' &&\r\n                    birthdayFrame.map((frame, index) => (\r\n                        <div onClick={handleSelectFrame(index)} key={'birthday' + index}>\r\n                            <img src={frame} alt='Not found'\r\n                                 className={`frame-img ${activeFrame === 'birthday' + index && 'active'}`}/>\r\n                        </div>\r\n                    ))\r\n                }\r\n                {\r\n                    activeSubTool === 'love' &&\r\n                    loveFrame.map((frame, index) => (\r\n                        <div onClick={handleSelectFrame(index)} key={'love' + index}>\r\n                            <img src={frame} alt='Not found'\r\n                                 className={`frame-img ${activeFrame === 'love' + index && 'active'}`}/>\r\n                        </div>\r\n                    ))\r\n                }\r\n                {\r\n                    activeSubTool === 'party-time' &&\r\n                    partyTimeFrame.map((frame, index) => (\r\n                        <div onClick={handleSelectFrame(index)} key={'partyTime' + index}>\r\n                            <img src={frame} alt='Not found'\r\n                                 className={`frame-img ${activeFrame === 'partyTime' + index && 'active'}`}/>\r\n                        </div>\r\n                    ))\r\n                }\r\n\r\n            </>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nImageFrameTool.propTypes = {\r\n    handleSelectedFrame: PropTypes.func.isRequired,\r\n    handleApplyFrame: PropTypes.func.isRequired,\r\n    handleCancelApplyFrame: PropTypes.func.isRequired,\r\n    activeSubTool: PropTypes.string,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    activeSubTool: state.tool.activeSubTool\r\n});\r\n\r\nexport default connect(mapStateToProps)(ImageFrameTool)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { connect } from 'react-redux';\r\nimport Button from \"../Button/Button\";\r\n\r\nconst stickerBaseUrl = `${window.location.origin}/stickers`;\r\nconst smileStickerUrl = `${stickerBaseUrl}/Smile`;\r\nconst butterfly = `${stickerBaseUrl}/Butterfly`;\r\n\r\nconst ImageStickerTool = ({\r\n    activeSubTool,\r\n    handleSelectedSticker,\r\n    handleApplySticker,\r\n}) => {\r\n    const smileSticker = [\r\n        `${smileStickerUrl}/Smile_1.png`,\r\n        `${smileStickerUrl}/Smile_2.png`,\r\n        `${smileStickerUrl}/Smile_3.png`,\r\n    ];\r\n\r\n    const butterflySticker = [\r\n        `${butterfly}/Butterfly_1.png`,\r\n        `${butterfly}/Butterfly_2.png`,\r\n    ];\r\n\r\n    const handleSelectSticker = (index) => {\r\n        return (\r\n            () => {\r\n                switch (activeSubTool) {\r\n                    case 'smile':\r\n                        handleSelectedSticker(smileSticker[index]);\r\n                        break;\r\n                    case 'butterfly':\r\n                        handleSelectedSticker(butterflySticker[index]);\r\n                        break;\r\n                    default:\r\n                }\r\n            }\r\n        )\r\n    };\r\n    const onApply = () => {\r\n        handleApplySticker();\r\n    };\r\n\r\n    return (\r\n        <div className='image-frame'>\r\n            {activeSubTool && (activeSubTool === 'smile' || activeSubTool === 'butterfly') &&\r\n            <>\r\n                <div md=\"auto\">\r\n                    <Button className='apply-button' color='#2980b9n' onClick={onApply}>Apply</Button>\r\n                </div>\r\n                {\r\n                    activeSubTool === 'smile' &&\r\n                    smileSticker.map((frame, index) => (\r\n                        <div onClick={handleSelectSticker(index)} key={'sticker' + index}>\r\n                            <img src={frame} alt='Not found' className='frame-img'/>\r\n                        </div>\r\n                    ))\r\n                }\r\n                {\r\n                    activeSubTool === 'butterfly' &&\r\n                    butterflySticker.map((frame, index) => (\r\n                        <div onClick={handleSelectSticker(index)} key={'sticker' + index}>\r\n                            <img src={frame} alt='Not found' className='frame-img'/>\r\n                        </div>\r\n                    ))\r\n                }\r\n            </>\r\n            }\r\n        </div>\r\n    )\r\n};\r\n\r\nImageStickerTool.propTypes = {\r\n    handleSelectedSticker: PropTypes.func.isRequired,\r\n    handleApplySticker: PropTypes.func.isRequired,\r\n    activeSubTool: PropTypes.string,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    activeSubTool: state.tool.activeSubTool\r\n});\r\n\r\nexport default connect(mapStateToProps)(ImageStickerTool)","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { setActiveTool, setActiveSubTool, undoImageChange, redoImageChange } from '../../redux/actions';\r\n\r\nimport './ToolBar.css';\r\n\r\nconst ToolBar = ({ activeTool, activeSubTool, selectedPhoto, setActiveTool, setActiveSubTool, undoImageChange, redoImageChange, canUndoChange, canRedoChange }) => {\r\n\r\n    useEffect(() => {\r\n        if (activeTool !== 'draw') {\r\n            setActiveTool(null)\r\n        }\r\n    }, [selectedPhoto]);\r\n\r\n    const handleSetTool = (name) => {\r\n        if (selectedPhoto) {\r\n            setActiveTool(name)\r\n        }\r\n    };\r\n\r\n    const tools = [\r\n        { name: 'filter', title: 'Filter' },\r\n        { name: 'frame', title: 'Frame' },\r\n        { name: 'stickers', title: 'Stickers' },\r\n        { name: 'crop', title: 'Crop' },\r\n        { name: 'draw', title: 'Draw' }\r\n    ];\r\n\r\n    const subTools = {\r\n        filter: [\r\n            {name: 'filter-blur', title: 'Blur'},\r\n            {name: 'filter-brightness', title: 'Brightness'},\r\n            {name: 'filter-grayscale', title: 'Grayscale'},\r\n            {name: 'filter-color', title: 'Color'},\r\n            {name: 'filter-saturation', title: 'Saturation'},\r\n            {name: 'filter-contrast', title: 'Contrast'},\r\n        ],\r\n        frame: [\r\n            { name: 'birthday', title: 'Birthday' },\r\n            { name: 'love', title: 'Love' },\r\n            { name: 'party-time', title: 'Party Time' }\r\n        ],\r\n        stickers: [\r\n            { name: 'smile', title: 'Smile' },\r\n            { name: 'butterfly', title: 'Butterfly' },\r\n\r\n        ]\r\n    };\r\n    return (\r\n        <div className='tool-bar'>\r\n\r\n\r\n            <div>\r\n                <ul className='tools'>\r\n                    {\r\n                        tools.map((tool, i) => (\r\n                            <li\r\n                                onClick={() => handleSetTool(tool.name)} key={i}\r\n                                className={activeTool === tool.name ? 'tool-active' : ''}>\r\n                                {tool.title}\r\n                            </li>\r\n                        ))\r\n                    }\r\n                </ul>\r\n            </div>\r\n            <div className='undo_redo_cont'>\r\n                <div className='undo_redo_btn_cont'>\r\n                    <button className='undo_btn' disabled={!canUndoChange} onClick={undoImageChange}/>\r\n                </div>\r\n                <div className='undo_redo_btn_cont'>\r\n                    <button className='redo_btn' disabled={!canRedoChange} onClick={redoImageChange}/>\r\n                </div>\r\n            </div>\r\n            {\r\n                subTools[activeTool] &&\r\n                <ul className='sub-tools'>\r\n                    {\r\n                        subTools[activeTool].map((subTool, i) => (\r\n                            <li\r\n                                onClick={() => setActiveSubTool(subTool.name)}\r\n                                className={activeSubTool === subTool.name ? 'tool-active' : ''} key={i}>\r\n                                {subTool.title}\r\n                            </li>\r\n                        ))\r\n                    }\r\n                </ul>\r\n            }\r\n        </div>\r\n    )\r\n};\r\n\r\nToolBar.propTypes = {\r\n    activeTool: PropTypes.string,\r\n    activeSubTool: PropTypes.string,\r\n    setActiveTool: PropTypes.func.isRequired,\r\n    setActiveSubTool: PropTypes.func.isRequired,\r\n    selectedPhoto: PropTypes.string,\r\n    undoImageChange: PropTypes.func.isRequired,\r\n    redoImageChange: PropTypes.func.isRequired,\r\n    canUndoChange: PropTypes.bool,\r\n    canRedoChange: PropTypes.bool\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    selectedPhoto: state.photo.selectedPhoto,\r\n    activeTool: state.tool.activeTool,\r\n    activeSubTool: state.tool.activeSubTool,\r\n    canUndoChange: state.photo.currentIndex > 0,\r\n    canRedoChange: state.photo.currentIndex < state.photo.imageHistory.length - 1\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    setActiveTool: tool => dispatch(setActiveTool(tool)),\r\n    setActiveSubTool: tool => dispatch(setActiveSubTool(tool)),\r\n    undoImageChange: () => dispatch(undoImageChange()),\r\n    redoImageChange: () => dispatch(redoImageChange())\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolBar);","import React from 'react';\r\n\r\nimport ImageContainer from '../ImageContainer/ImageContainer';\r\nimport ToolBar from '../ToolBar/ToolBar';\r\n\r\nimport './Editor.css';\r\n\r\nconst Editor = () => {\r\n\r\n    return (\r\n        <div className='content'>\r\n            <ToolBar/>\r\n            <ImageContainer/>\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\nexport default Editor;","import React from 'react';\r\n\r\nimport SideBar from '../components/SideBar/SideBar';\r\nimport Editor from '../components/Editor/Editor';\r\n\r\nimport './Home.css'\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div className='wrapper-box'>\r\n            <div className=\"wrapper\">\r\n                <SideBar/>\r\n                <Editor/>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Home;","import React from 'react';\r\n\r\nimport Home from './containers/Home';\r\n\r\nfunction App() {\r\n    return (\r\n        <Home/>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport reducer from './reducers';\r\n\r\nexport default function configureStore(preloadedState) {\r\n    return createStore(\r\n        reducer, preloadedState, applyMiddleware(thunk)\r\n    );\r\n}","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport configureStore from './redux/configureStore';\r\n\r\nimport App from './App';\r\n\r\nimport './index.css';\r\n\r\nconst store = configureStore();\r\n\r\nrender(\r\n    <React.StrictMode>\r\n        <Provider store={store}>\r\n            <App/>\r\n        </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}